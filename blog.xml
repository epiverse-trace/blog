<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Epiverse-TRACE developer space</title>
<link>https://epiverse-trace.github.io/blog.html</link>
<atom:link href="https://epiverse-trace.github.io/blog.xml" rel="self" type="application/rss+xml"/>
<description>A place for Epiverse-TRACE developers to share their reflections, learnings, and showcase their work.</description>
<generator>quarto-1.6.4</generator>
<lastBuildDate>Mon, 22 Jul 2024 00:00:00 GMT</lastBuildDate>
<item>
  <title>epiparameter v0.2.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/epiparameter_v0.2.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new epiparameter version v0.2.0. Here is an automatically generated summary of the changes in this version.</p>
<p>The second release of the {epiparameter} R package focuses on interoperability with the <a href="https://mrc-ide.github.io/epireview/">{epireview} R package</a>. Several functions have been refactored and enhanced.</p>
<p>This release benefited from feedback from the participants of an <a href="https://who-collaboratory.github.io/collaboratory-epiparameter-community/#/pages/news">EpiParameter Community workshop hosted by the World Health Organisation</a>.</p>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<ul>
<li><p>The <code>as_epidist()</code> S3 generic has been added to the package for the coercion of other R objects into <code>&lt;epidist&gt;</code> objects. The <code>as_epidist.data.frame()</code> method is added, as well as the internal functions <code>is_epireview()</code> which determines if a <code>&lt;data.frame&gt;</code> is from {epireview}, and <code>epireview_to_epidist()</code> performs the conversion (#298, #334 &amp; #335)</p></li>
<li><p>The <code>epireview_core_cols.rda</code> data is added to the package. This is used to determine whether the input to <code>as_epidist.data.frame()</code> is a parameter table from {epireview} as these objects do not have a recognisable class attribute (#298).</p></li>
<li><p>A new website only vignette (i.e.&nbsp;<a href="https://r-pkgs.org/vignettes.html#sec-vignettes-article">article</a>) <code>data_from_epireview.Rmd</code> is added that explains how to use <code>as_epidist()</code> with data from {epireview} (#298 &amp; #335).</p></li>
<li><p>A new vignette <code>database.Rmd</code> is added to the package to provide a web interface to the {epiparameter} library of epidemiological parameters. Contributed by <span class="citation" data-cites="sbfnk">@sbfnk</span> (#311).</p></li>
<li><p>The plotting method for <code>&lt;epidist&gt;</code> objects (<code>plot.epidist()</code>) has been improved to better differentiate continuous from discrete or discretised distributions (#315).</p></li>
<li><p><code>epidist_db(..., single_epidist = TRUE)</code> now prioritises parameter entries that account for right truncation (#323).</p></li>
<li><p><code>create_epidist_prob_dist()</code> (previously named <code>create_prob_dist()</code>) is now exported and enables more control of discretisation settings by allowing arguments to be passed to <code>distcrete::distcrete()</code> via <code>...</code> (#324).</p></li>
<li><p>The <code>&lt;multi_epidist&gt;</code> print method (<code>print.multi_epidist()</code>) has been improved to provides object information in the print header, the first few elements of the list or all elements if list is short, and some extra links and advice in the print footer. The design of the print method follows the design pattern of <a href="https://pillar.r-lib.org/index.html">{pillar}</a> (#326).</p></li>
<li><p><code>&lt;epidist&gt;</code> objects and functions that work with <code>&lt;epidist&gt;</code> objects now work with exponential distributions (#333).</p></li>
<li><p>The package now has an explicit data license: <a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode.txt">CC0</a> in the <code>LICENSE</code> file.</p></li>
</ul>
</section>
<section id="breaking-changes" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<ul>
<li><p><code>list_distributions()</code> has been replaced by <code>parameter_tbl()</code> which enhances the printing by leveraging {pillar} (#321).</p></li>
<li><p>The <code>&lt;vb_epidist&gt;</code> plotting method (<code>plot.vb_epidist()</code>) has been removed from the package. This provided minimal functionality and was unnecessarily complicating the function signature of <code>plot.epidist()</code> (#315).</p></li>
</ul>
</section>
<section id="bug-fixes" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes">Bug fixes</h2>
<ul>
<li>DOI and PMID are lowercase throughout the package to resolve issues with older versions of R (see issue #301) (#317).</li>
</ul>
</section>
<section id="deprecated-and-defunct" class="level2">
<h2 class="anchored" data-anchor-id="deprecated-and-defunct">Deprecated and defunct</h2>
<ul>
<li>None</li>
</ul>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p><a href="https://github.com/Bisaloo">@Bisaloo</a> <a href="https://github.com/CarmenTamayo">@CarmenTamayo</a> <a href="https://github.com/DxChen0126">@DxChen0126</a> <a href="https://github.com/adamkucharski">@adamkucharski</a> <a href="https://github.com/chartgerink">@chartgerink</a> <a href="https://github.com/chloerice48">@chloerice48</a> <a href="https://github.com/cm401">@cm401</a> <a href="https://github.com/jamesmbaazam">@jamesmbaazam</a> <a href="https://github.com/jlessler">@jlessler</a> <a href="https://github.com/joshwlambert">@joshwlambert</a> <a href="https://github.com/papsti">@papsti</a> <a href="https://github.com/prabasaj">@prabasaj</a> <a href="https://github.com/sbfnk">@sbfnk</a> <a href="https://github.com/wzmli">@wzmli</a></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Epiparameter V0.2.0},
  date = {2024-07-22},
  url = {https://epiverse-trace.github.io/posts/epiparameter_v0.2.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Epiparameter
V0.2.0.”</span> July 22, 2024. <a href="https://epiverse-trace.github.io/posts/epiparameter_v0.2.0/">https://epiverse-trace.github.io/posts/epiparameter_v0.2.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/epiparameter_v0.2.0/</guid>
  <pubDate>Mon, 22 Jul 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Some thoughts after a trial run of GitHub’s Copilot Workspace</title>
  <dc:creator>Joshua W. Lambert</dc:creator>
  <dc:creator>James Mba Azam</dc:creator>
  <dc:creator>Pratik Gupte</dc:creator>
  <dc:creator>Adam Kucharski</dc:creator>
  <link>https://epiverse-trace.github.io/posts/copilot-workspace/</link>
  <description><![CDATA[ 





<p>GitHub recently previewed <a href="https://github.blog/2024-04-29-github-copilot-workspace/">‘Copilot Workspace’</a>, which aims to use generative AI to assist software developers. Rather than just giving in-line suggestions, as GitHub copilot does, workspace allows users to map out and execute entire projects. We got early preview access to the tool, so decided to see how well it performed for our needs in Epiverse-TRACE.</p>
<p>In the Epiverse-TRACE initiative we aim to develop an ecosystem of epidemic analytics tools as <a href="https://digitalpublicgoods.net/">Digital Public Goods</a> in the form of R packages. We aim to <a href="https://epiverse-trace.github.io/blueprints/">follow best-practices</a> given that our tools will be used to inform public health decisions. For efficiency, we use a range of development tools, including integrated development environments (IDE), such as RStudio and Visual Studio Code, other R packages to help check and document our code, for example {lintr} and {roxygen2}, and version control and code sharing tools, git and GitHub.</p>
<p>Given the rapid development and increasing availability to artificial intelligence (AI) models, specifically large language models, offer the potential to be another development tool to add to the arsenal of researchers and software engineers to enhance productivity and improve the reliability of the code we write and others depend upon <span class="citation" data-cites="vanHoek2024">(Hoek et al. 2024)</span>. Large language models like ChatGPT from OpenAI, Gemini from Google, Claude from Anthropic, as well as many others and new ones frequently appearing, have presented opportunities to quickly generate material – text, code and images – from text prompts.</p>
<p>A small group of Epiverse-TRACE professors and research software engineers decided to explore the suitability of one such, GitHub Copilot integrated with GitHub Workspaces, for some typical use cases encountered in our day-to-day work. We do note that many other such tools are available, and we chose Copilot in Workspaces as our code is hosted on GitHub, making for easy evaluation of the specific contribution of the AI tool. However, some of our broad conclusions are based on using other tools for similar tasks.</p>
<p>The aim of this blog post is to summarise our experiences with Copilot and Workspaces, and share our thoughts more generally about how the current feature set of AI-powered development tools could help with our daily development tasks, and with research software development at large. We evaluated Copilot workspace across three tasks of varying difficulty and requirements:</p>
<ul>
<li><p>Experiment 1: Exporting an R function by updating the documentation</p></li>
<li><p>Experiment 2: Adding a basic epidemic model to an existing R package that contains other epidemiological models</p></li>
<li><p>Experiment 3: Conducting a code review on an R package</p></li>
</ul>
<section id="experiment-1-export-an-r-function-by-updating-the-documentation" class="level2">
<h2 class="anchored" data-anchor-id="experiment-1-export-an-r-function-by-updating-the-documentation">Experiment 1: Export an R function by updating the documentation</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Difficulty level: basic</p>
</div>
</div>
<p>The first experiment was on the {EpiNow2} R package. An existing <a href="https://github.com/epiforecasts/EpiNow2/issues/681">Issue #681</a> was chosen. It was a simple task to evaluate Copilot workspace’s ability to interpret requests that require small changes to the codebase of a package (i.e.&nbsp;can be achieved in a single commit by changing less than 5 lines of code). The issue stated that an internal function, <code>epinow2_cmdstan_model()</code> should be exported, with the issue description explaining this would help users specify custom options for running the models.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://epiverse-trace.github.io/posts/copilot-workspace/epinow2_issue.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot of EpiNow2 package issue 681 which was used as an example application of GitHub Copilot Workspace.</figcaption>
</figure>
</div>
<!-- markdownlint-disable MD024 -->
<section id="outcome" class="level3">
<h3 class="anchored" data-anchor-id="outcome">Outcome</h3>
<p>The specification provided by Copilot workspace diagnosed the issue requirements, mentioning that the <code>NAMESPACE</code> file, which stores information on functions offered by a package and functions imported from other packages, would have to be updated for the R package to export this currently unexported function. The proposed solution also addressed the desired changes, stating that the function was to be exported and the keyword <code>internal</code> would be removed. The automatically generated plan proposed to edit the file documentation and <code>NAMESPACE</code>, but we edited this to more specifically replace the <code>@keyword internal</code> {roxygen} tag with <code>@export</code>.</p>
</section>
<section id="our-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="our-thoughts">Our thoughts</h3>
<p>The implementation offered by GitHub copilot workspace was correct and replaced <code>@keywords internal</code> with <code>@export</code> in the correct function documentation <code>epinow2_stan_model()</code>.</p>
<p>However, it also changed the formatting of one of the function arguments (<code>@param model</code>) by moving some text to the next line and added a comma to the last but one item listed in the sentence. (It seems AI has taken a side on the Oxford comma debate).</p>
<p>Overall, this test case of GitHub copilot workspace was a partial success. It correctly recognised the links between inline R function documentation, Roxygen tags, and the R-specific documentation files in <code>man/</code>. However, it (naturally) does not have a mechanistic understanding of package development and how changing tags in documentation is used to auto-update doc files using development tools. It correctly modified the part of the file needed to export an internal function. This showcases an example of where this technology can be beneficial: those new to a language or paradigm that have not yet picked up all of the development details that are often second nature to experienced developers. In this example, the time taken to make this change in GitHub copilot workspace was likely ~10x longer than what our RSEs would take. However, if someone was used to developing in say, Python, and was new to the conventions of exporting functions in R using {roxygen} documentation, this test case shows how copilot workspace can reliably assist. On the other hand, because these changes make no reference to standard development tools, they would not help new developers learn how or where to use them.</p>
<p>The changes made will still require the user to manually run the documentation (using either <code>devtools::document()</code> or <code>roxygen2::roxygenize()</code>) to update the package <code>NAMESPACE</code> for the function to be exported. Our recommendation would be for AI tools to integrate with and call development tools used by developers (analogous to pre-commit hooks running tools before committing) to make sure this is taken care of all in a single generative step.</p>
</section>
</section>
<section id="experiment-2-add-a-simple-epidemic-model-to-an-r-package-that-contains-more-complex-models" class="level2">
<h2 class="anchored" data-anchor-id="experiment-2-add-a-simple-epidemic-model-to-an-r-package-that-contains-more-complex-models">Experiment 2: Add a simple epidemic model to an R package that contains more complex models</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Difficulty level: moderate to high</p>
</div>
</div>
<p>{epidemics} is an Epiverse-TRACE R package that exports a range of compartmental epidemiological models of varying complexities and applications.</p>
<p>In the second test case, we created an issue in the {epidemics} R package requesting a basic SIR model, with the issue description requesting the model to have no age structure and to use existing functionality in the package to specify a disease intervention. Additionally, the issue requested that the model be solved with the {deSolve} R package, which is a differential equation solver in R. A basic SIR model would have been new to the package, but one of several other compartmental models, and simpler than the models already implemented.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://epiverse-trace.github.io/posts/copilot-workspace/epidemics_issue.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot of epidemics package issue 238 which was used as an example application of GitHub Copilot Workspace.</figcaption>
</figure>
</div>
<section id="outcome-1" class="level3">
<h3 class="anchored" data-anchor-id="outcome-1">Outcome</h3>
<p>GitHub copilot workspace outlined the existing functionality in the package and proposed changes including adding a new file called <code>R/model_sir.R</code>, which follows the <code>model_*.R</code> naming convention used in {epidemics}. As requested, copilot also proposed that the new SIR model would support the use of interventions that are already been implemented in the package.</p>
</section>
<section id="our-thoughts-1" class="level3">
<h3 class="anchored" data-anchor-id="our-thoughts-1">Our thoughts</h3>
<p>The code generated was an R function that constructed a basic SIR model, and this was well documented using a {roxygen2} documentation block. However, several aspects of the code generated did not match the proposal generated by copilot workspace, and the code contained inadvisable coding practices in R (i.e.&nbsp;code smells). Firstly the SIR model itself. The model implemented follows the standard set of differential equations that are solved using {deSolve}, as requested in our prompt. However, the model does not have any options to input interventions, which the proposed solution by GitHub copilot workspace suggested it would. The second downside is the use of <code>require(deSolve)</code> in the function body of the generated code. This is bad practice in R package development as functions should namespace any functions that are being called from other packages (e.g.&nbsp;<code>packagename::func_name()</code>).</p>
<p>This task required copilot workspace to understand the contents and conventions of the {epidemics} R package and generate a simple compartmental model which would integrate with the infrastructure in the package for defining interventions in models. Although it correctly summarised the package contents, its attempt to answer the specific request from our prompt had many inaccuracies. The generated code is likely influenced by the many examples of SIR models written in R on the internet and on GitHub. These might be R scripts or gists and thus coding practises used there are not always appropriate for writing code to be distributed in an R package, resulting in decisions like having <code>require(deSolve)</code> in the function.</p>
<p>AI-generated code like that seen in this example showcases where users need to be diligent and not assume that the text descriptions from copilot match the code. In the end, this was a test example and was unlikely to be merged into {epidemics} even if the code was correct. However, with the code generated, it presents almost no use; it would require as much time for an RSE to refactor this function as it would to write one from scratch following the design principles and demands of the {epidemics} package.</p>
</section>
</section>
<section id="experiment-3-conducting-a-code-review-on-an-r-package" class="level2">
<h2 class="anchored" data-anchor-id="experiment-3-conducting-a-code-review-on-an-r-package">Experiment 3: Conducting a code review on an R package</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Difficulty level: moderate to high</p>
</div>
</div>
<p>In the last test case, we requested GitHub copilot workspace to conduct a <a href="https://github.com/epiverse-trace/simulist/pull/117">code review of the entire code base of a package</a>. At Epiverse-TRACE, it is standard practise to conduct a full package review. As any code base develops, including R packages, more commits are added and often the number of lines of code increases. Reviewing all of these changes before releasing a new version of the package is a timely undertaking for package reviewers. If AI tools could review the code base, similar to how static code analysers work, and suggest improvements to, for example, code style, memory efficiency, documentation, unit testing, UX/UI, it would greatly improve efficiency before releasing the code.</p>
<section id="outcome-2" class="level3">
<h3 class="anchored" data-anchor-id="outcome-2">Outcome</h3>
<p>Here, Copilot provided no analysis of the code base. It regurgitated the changes described in the <a href="https://epiverse-trace.github.io/blueprints/code-review.html#full-package-review">package review pull request</a>, likely from a mix of the pull request description and the changelog (<code>NEWS.md</code> file), and did not analyse any of the code. Therefore, it provided no additional use than if the reviewer had just read the <code>NEWS</code>.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Based on our trials we observe that GitHub copilot Workspace may not provide a significant benefit to research software engineers in domain-specific R package development, where problems are complex and bespoke solutions are common. The evidence above suggests there’s still a long way to go before AI-powered tools can produce unsupervised code projects equivalent to that of a research software engineer. One observation is that generative AI is better trained for some purposes than others, biased by the amount of training data/information available. This makes it struggle in niche areas with a relatively smaller public code base to train models with (e.g.&nbsp;R functions for epidemic analysis are much rarer than generic JavaScript functions for web design). A second is that AI models don’t seem to understand how different parts of a codebase link together, so they provide solutions that are inconsistent with the requirements of the codebase (design principles, code style, etc). These models may, however, be more useful for more common tasks, such as building dashboard templates.</p>
<p>The test cases we experimented with suggest that this tool will not replace, and at times not even enhance development when the task requires a more integrated development than generating a standalone script. These tools are evolving rapidly and we are sure improvements will continue. In the short term tools like GitHub copilot workspace need to be used responsibly with an awareness of their limitations and not a blind trust that the code it writes is always correct. We would caution against relying on generative AI tools alone to develop software with potentially large-scale impacts - scrutiny by trained developers is still key. Research software engineers will play a key part in this as they will ensure that code and software written with and by AI tools meet required standards, are trustworthy, and are not potentially harmful. Where we see generative AI tools being more immediately useful in research software development is in <a href="https://billyquilty.substack.com/p/llmlinelist-enabling-rapid-outbreak">tasks that require sifting through or summarising vast amounts of information</a>; for example, in querying software documentation, or to help get started with a new programming framework or language.</p>
<p><strong>All authors thank Hugo Gruson and Chris Hartgerink for their valuable feedback and contributions to this post.</strong></p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0">
<div id="ref-vanHoek2024" class="csl-entry">
Hoek, Albert Jan van, Sebastian Funk, Stefan Flasche, Billy J Quilty, Esther van Kleef, Anton Camacho, and Adam J Kucharski. 2024. <span>“Importance of Investing Time and Money in Integrating Large Language Model-Based Agents into Outbreak Analytics Pipelines.”</span> <em>The Lancet Microbe</em>, May. <a href="https://doi.org/10.1016/s2666-5247(24)00104-6">https://doi.org/10.1016/s2666-5247(24)00104-6</a>.
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{w._lambert2024,
  author = {W. Lambert, Joshua and Mba Azam, James and Gupte, Pratik and
    Kucharski, Adam},
  title = {Some Thoughts After a Trial Run of {GitHub’s} {Copilot}
    {Workspace}},
  date = {2024-07-15},
  url = {https://epiverse-trace.github.io/posts/copilot-workspace/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-w._lambert2024" class="csl-entry quarto-appendix-citeas">
W. Lambert, Joshua, James Mba Azam, Pratik Gupte, and Adam Kucharski.
2024. <span>“Some Thoughts After a Trial Run of GitHub’s Copilot
Workspace.”</span> July 15, 2024. <a href="https://epiverse-trace.github.io/posts/copilot-workspace/">https://epiverse-trace.github.io/posts/copilot-workspace/</a>.
</div></div></section></div> ]]></description>
  <category>AI</category>
  <category>GitHub</category>
  <category>Copilot Workspace</category>
  <category>R</category>
  <category>R package</category>
  <category>software development</category>
  <category>DOI</category>
  <guid>https://epiverse-trace.github.io/posts/copilot-workspace/</guid>
  <pubDate>Mon, 15 Jul 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Improving Ecosystem Interoperability Iteratively via Progressive Enhancement</title>
  <dc:creator>Hugo Gruson</dc:creator>
  <link>https://epiverse-trace.github.io/posts/progressive-enhancement/</link>
  <description><![CDATA[ 





<p>We are continuing our post series on S3 object orientation and interoperability in R. We have previously discussed <a href="../parent-class">what makes a good S3 class and how to choose a good parent for it, as well as when to write or not write a custom method</a>. We have highlighted in particular how classes inheriting from data.frames can simplify user experience because of familiarity, and reduce developer workload due to the pre-existing S3 methods.</p>
<p>We have detailed how to improve compatibility with the tidyverse by explaining:</p>
<ul>
<li><a href="https://hugogruson.fr/posts/compa-tibble/">how functions taking data.frames or data.frames subclass should also allow compatibility with tibble, which can be done in a few steps</a></li>
<li><a href="../extend-dataframes">how to ensure class attributes are preserved whenever possible while using dplyr functions</a>.</li>
</ul>
<p>Here, we are going to explore how to start adding support in the ecosystem for the new S3 classes while minimizing user-facing breaking changes. We have previously delved into this topic with our post <a href="../s3-generic">“Convert Your R Function to an S3 Generic: Benefits, Pitfalls &amp; Design Considerations”</a> and this is a wider and higher-level view of the same topic.</p>
<p>The strategy presented here is the variation of a common concept in web development and the web ecosystem: <a href="https://developer.mozilla.org/en-US/docs/Glossary/Progressive_Enhancement">progressive enhancement</a>. This philosophy aims to support browsers with a common set of essential features, and even richer features for browser with the most recent updates. It makes sense to think about this philosophy with the prism of introducing new classes to a new software ecosystem as it has the similar constraints of multiple stakeholders with different interests and timelines. The application of progressive enhancement in this context means that users or packages that have not (yet) adopted the new classes are not penalized compared to users or packages that have.</p>
<section id="adding-class-support-to-function-inputs-via-progressive-enhancement" class="level2">
<h2 class="anchored" data-anchor-id="adding-class-support-to-function-inputs-via-progressive-enhancement">Adding class support to function inputs via progressive enhancement</h2>
<p>The goal here is to allow functions to accept the new classes as inputs, while keeping the old behaviour unchanged for unclassed objects (or with a different class than the new one).</p>
<p>This can conveniently be done in an almost transparent way by converting the old function to the S3 generic, and using the default method to handle the old behaviour. The practical steps, and minor caveats, have been previously described in the post <a href="../s3-generic">“Convert Your R Function to an S3 Generic: Benefits, Pitfalls &amp; Design Considerations”</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://epiverse-trace.github.io/posts/progressive-enhancement/convert_to_generic.svg" class="img-fluid figure-img"></p>
<figcaption>A before / after type image showing the conversion of a function to a generic with a default method keeping the exisiting behaviour.</figcaption>
</figure>
</div>
<p>For a different, additional, example, we can consider a function working on patient-level data, which previously only accepted a <code>data.frame</code> as input:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' Compute length of stay in hospital on a patient-level dataset</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @param data A data.frame containing patient-level data</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @param admission_column The name of the column containing the admission date</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @param discharge_column The name of the column containing the discharge date</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @returns A numeric vector of hospitalization durations in days</span></span>
<span id="cb1-8">compute_hospitalization_duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, admission_column, discharge_column) {</span>
<span id="cb1-9"></span>
<span id="cb1-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">difftime</span>(</span>
<span id="cb1-11">    data[[discharge_column]],</span>
<span id="cb1-12">    data[[admission_column]],</span>
<span id="cb1-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">units =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"days"</span></span>
<span id="cb1-14">  )</span>
<span id="cb1-15"></span>
<span id="cb1-16">}</span></code></pre></div>
<p>We want to add support for <code>linelist</code> objects, as defined in the <a href="https://epiverse-trace.github.io/linelist">linelist package</a>. <code>linelist</code> objects inherit from <code>data.frame</code> and contain an additional <code>tags</code> attribute. In particular, <code>linelist</code> objects can have a <code>date_admission</code> and <code>date_discharge</code> tag. This means we can use the tags to automatically detect the columns to use.</p>
<p>But we want the function to keep working for standard <code>data.frame</code>s, <code>tibble</code>s, etc. We can follow the steps described in the previous post to convert the function to a generic, and add a default method to handle the old behaviour:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">compute_hospitalization_duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, ...) {</span>
<span id="cb2-2"></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">UseMethod</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"compute_hospitalization_duration"</span>)</span>
<span id="cb2-4"></span>
<span id="cb2-5">}</span>
<span id="cb2-6"></span>
<span id="cb2-7">compute_hospitalization_duration.default <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, admission_column, discharge_column) {</span>
<span id="cb2-8"></span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">difftime</span>(</span>
<span id="cb2-10">    data[[discharge_column]],</span>
<span id="cb2-11">    data[[admission_column]],</span>
<span id="cb2-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">units =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"days"</span></span>
<span id="cb2-13">  )</span>
<span id="cb2-14"></span>
<span id="cb2-15">}</span>
<span id="cb2-16"></span>
<span id="cb2-17">compute_hospitalization_duration.linelist <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, ...) {</span>
<span id="cb2-18"></span>
<span id="cb2-19">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> linelist<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags_df</span>(data)</span>
<span id="cb2-20"></span>
<span id="cb2-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compute_hospitalization_duration</span>(</span>
<span id="cb2-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> x,</span>
<span id="cb2-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">admission_column =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date_admission"</span>,</span>
<span id="cb2-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">discharge_column =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date_discharge"</span></span>
<span id="cb2-25">  )</span>
<span id="cb2-26"></span>
<span id="cb2-27">}</span></code></pre></div>
<p>If the function was already a generic, then a new method for the new class should be added, leaving everything else unchanged.</p>
</section>
<section id="adding-class-support-to-function-outputs-via-progressive-enhancement" class="level2">
<h2 class="anchored" data-anchor-id="adding-class-support-to-function-outputs-via-progressive-enhancement">Adding class support to function outputs via progressive enhancement</h2>
<p>Adding class support to function outputs is often more challenging. A common option is to add a new argument to the function, which would be a boolean indicating whether the output should be of the new class or not. But this doesn’t fit in the view of progressive enhancement, as it would require users to change their code to benefit from the new classes, or to suffer from breaking changes.</p>
<p>While the new argument approach is sometimes indeed the only possible method, there are some situations where we can have an approach truly following the progressive enhancement philosophy.</p>
<p>In particular, this is the case when the old output was already inheriting from the parent of the new class (hence the importance of carefully choosing the parent class). In this situation, the new attributes from the new class should not interfere with existing code for downstream analysis.</p>
<p>In this case, let’s consider a function that was previously returning an unclassed <code>data.frame</code> with patient-level data:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">create_patient_dataset <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_patients =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) {</span>
<span id="cb3-2"></span>
<span id="cb3-3">  data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb3-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">patient_id =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(n_patients),</span>
<span id="cb3-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span>, n_patients, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb3-6">  )</span>
<span id="cb3-7"></span>
<span id="cb3-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(data)</span>
<span id="cb3-9"></span>
<span id="cb3-10">}</span></code></pre></div>
<p>We want to start returning a <code>linelist</code> object. Because <code>linelist</code> objects are <code>data.frame</code>s (or <code>tibble</code>s) with an extra <code>attr</code>, it can be done in a transparent way:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">create_patient_dataset <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_patients =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) {</span>
<span id="cb4-2"></span>
<span id="cb4-3">  data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb4-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">patient_id =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(n_patients),</span>
<span id="cb4-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span>, n_patients, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb4-6">  )</span>
<span id="cb4-7"></span>
<span id="cb4-8">  data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> linelist<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(</span>
<span id="cb4-9">    data,</span>
<span id="cb4-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"patient_id"</span>,</span>
<span id="cb4-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"age"</span></span>
<span id="cb4-12">  )</span>
<span id="cb4-13"></span>
<span id="cb4-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(data)</span>
<span id="cb4-15"></span>
<span id="cb4-16">}</span>
<span id="cb4-17"></span>
<span id="cb4-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inherits</span>(data, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data.frame"</span>)</span></code></pre></div>
<p>For a more realistic example, you can also see the work in progress to integrate the <a href="https://github.com/socialcontactdata/contactmatrix">new <code>contactmatrix</code> standard format</a> for social contact data to the <a href="https://github.com/Bisaloo/contactdata">contactdata package</a>.</p>
<p>This is however only true if code in downstream analysis follows good practices in checking for the class of an object <sup>1</sup>. If existing code was testing equality of the class to a certain value, it will break when the new class value is appended. This is described in a <a href="https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html">post on the R developer blog, when base R was adding a new <code>array</code> class value to <code>matrix</code> objects</a>. Class inheritance should never be tested via <code>class(x) == "some_class"</code>. Instead, <code>inherits(x, "some_class")</code> or <code>is(x, "some_class")</code> should be used to future-proof the code and allow appending an additional in the future.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Object oriented programming and S3 classes offer a convenient way to iteratively add interoperability in the ecosystem in a way that is minimally disruptive to users and developers. Newly classed input support can be added via custom methods (after converting the existing function to a generic if necessary). Newly classed output support can be added via progressive enhancement, by ensuring that the new class is a subclass of the old one and that downstream code uses good practices to test class inheritance.</p>
<p><strong>Thanks to James Azam and Tim Taylor for their very valuable feedback on this post.</strong></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This is now <a href="https://github.com/r-devel/r-svn/commit/77ebdff5adc200dfe9bc850bc4447088830d2ee0">enforced in R packages by R CMD check</a>, and via the <a href="https://lintr.r-lib.org/reference/class_equals_linter.html"><code>class_equals_linter()</code></a> in the <a href="https://lintr.r-lib.org/">lintr package</a>.↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{gruson2024,
  author = {Gruson, Hugo},
  title = {Improving {Ecosystem} {Interoperability} {Iteratively} via
    {Progressive} {Enhancement}},
  date = {2024-07-05},
  url = {https://epiverse-trace.github.io/posts/progressive-enhancement/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-gruson2024" class="csl-entry quarto-appendix-citeas">
Gruson, Hugo. 2024. <span>“Improving Ecosystem Interoperability
Iteratively via Progressive Enhancement.”</span> July 5, 2024. <a href="https://epiverse-trace.github.io/posts/progressive-enhancement/">https://epiverse-trace.github.io/posts/progressive-enhancement/</a>.
</div></div></section></div> ]]></description>
  <category>R</category>
  <category>interoperability</category>
  <category>S3</category>
  <category>progressive enhancement</category>
  <category>ecosystem</category>
  <category>lifecycle</category>
  <category>object orientation</category>
  <category>DOI</category>
  <guid>https://epiverse-trace.github.io/posts/progressive-enhancement/</guid>
  <pubDate>Fri, 05 Jul 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>2024 mpox outbreak: common analytics tasks and available R tools</title>
  <dc:creator>James Azam</dc:creator>
  <dc:creator>Hugo Gruson</dc:creator>
  <dc:creator>Adam Kucharski</dc:creator>
  <link>https://epiverse-trace.github.io/posts/mpox-preparedness/</link>
  <description><![CDATA[ 





<p>There are ongoing outbreaks of mpox globally. The Democratic Republic of Congo (DRC) is so far the worst hit with a total of 7,851 cases and 384 deaths reported between January 1 and May 26, 2024 <sup>1</sup>. Before 2022, there were few reports of sustained mpox transmission globally. However, during the following year (Jan 1, 2022, and Jan 29, 2023), 110 countries in all six WHO Regions had reported a total of 85,473 confirmed cases and 89 deaths between them <span class="citation" data-cites="laurenson2023description">(Laurenson-Schafer et al. 2023)</span>.</p>
<p>Mpox is transmitted through respiratory droplets and direct contact with infected persons. The disease is characterized by fever, cough, and a rash, with the mean incubation period estimated to be about 7.8 days <span class="citation" data-cites="ward2022transmission">(Ward et al. 2022)</span>. Infected individuals may experience severe symptoms leading to hospitalisation or death. There are two genetic clades: clade I and clade II, which also has subclades IIa and IIb <span class="citation" data-cites="laurenson2023description">(Laurenson-Schafer et al. 2023)</span>.</p>
<p>Several analyses of the potential impact of outbreaks at country level have already emerged in 2024. The US CDC, for example, has analysed the potential size of outbreaks resulting from transmission within and between households <sup>2</sup> and the risk of Clade 1 mpox outbreaks among some key populations associated with key transmission routes <sup>3</sup>. Another group of researchers have estimated the transmissibility of mpox in the DRC from more recent (2010 - 2019) surveillance data to update existing estimates, which are based on old data <span class="citation" data-cites="charniga2024updating">(Charniga, McCollum, et al. 2024)</span>. However, tackling ongoing outbreaks around the world will require a coordinated response from the global health community.</p>
<p>The Epiverse-TRACE team is developing a set of analytical tools that could help support decision-makers during outbreaks. This post provides an overview of the tasks that such tools can be applied to in the context of the ongoing mpox outbreaks.</p>
<section id="common-outbreak-analytics-tasks" class="level2">
<h2 class="anchored" data-anchor-id="common-outbreak-analytics-tasks">Common outbreak analytics tasks</h2>
<p>Outbreak analytics in the context of the ongoing mpox outbreak involves several tasks that can be handled by existing and emerging R tools. Some of the tasks include estimating the transmission potential, forecasting infection dynamics, estimating severity, and assessing the impact of interventions.</p>
<p>Here, we briefly describe some common tasks, data required, and the ready R tools/packages developed by the Epiverse-TRACE team and the wider community.</p>
<section id="cleaning-and-validating-data" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-and-validating-data">Cleaning and validating data</h3>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Data cleaning is often the first task in outbreak analytics. This usually involves identifying and correcting errors in the data, standardizing the format of key variables, and ensuring that the data is in a format that is fit for analysis. Data validation is also important to ensure that the data is accurate.</p>
</div>
</div>
</div>
<p><a href="https://epiverse-trace.github.io/cleanepi/"><code>{cleanepi}</code></a> is useful for cleaning individual-level datasets, and <a href="https://epiverse-trace.github.io/linelist/"><code>{listlist}</code></a> can be used to tag and validate key variables in datasets that might change over time. The <a href="https://epiverse-trace.github.io/numberize/"><code>{numberize}</code></a> package can also be used to convert numbers written as text. It currently has functionality for English, Spanish, and French.</p>
</section>
<section id="estimating-transmission-potential" class="level3">
<h3 class="anchored" data-anchor-id="estimating-transmission-potential">Estimating transmission potential</h3>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>A key initial question during emerging outbreaks is the transmission potential of the disease. This is typically quantified using parameters such as: the basic reproduction number, <img src="https://latex.codecogs.com/png.latex?R_0">; the time-varying reproduction number, <img src="https://latex.codecogs.com/png.latex?R_t">; and <img src="https://latex.codecogs.com/png.latex?k">, which captures individual heterogeneity in transmission (i.e.&nbsp;“superspreading” potential). These quantities are useful to assess the potential for further spread of the disease and the impact of interventions.</p>
</div>
</div>
</div>
<section id="population-level-transmissibility-r_0-and-r_t" class="level4">
<h4 class="anchored" data-anchor-id="population-level-transmissibility-r_0-and-r_t">Population-level transmissibility (<img src="https://latex.codecogs.com/png.latex?R_0"> and <img src="https://latex.codecogs.com/png.latex?R_t">)</h4>
<p>The basic reproduction number, <img src="https://latex.codecogs.com/png.latex?R_0">, is the average number of secondary cases produced by a single infected individual in a completely susceptible population. The time-varying reproduction number, <img src="https://latex.codecogs.com/png.latex?R_t">, on the other hand, is the average number of secondary cases produced by a single infected individual at time <img src="https://latex.codecogs.com/png.latex?t"> in a partially susceptible population. <img src="https://latex.codecogs.com/png.latex?R_t"> is a more useful quantity during an outbreak as it accounts for the impact of interventions and changes in population immunity.</p>
<p>If data is available on the daily number of reported cases, <a href="https://epiforecasts.io/EpiNow2/"><code>{EpiNow2}</code></a> and <a href="https://mrc-ide.github.io/EpiEstim/"><code>{EpiEstim}</code></a> can be used to estimate <img src="https://latex.codecogs.com/png.latex?R_t">. These packages require data on the time scale of transmission (i.e.&nbsp;the generation time, or the serial interval, which is <a href="https://royalsocietypublishing.org/doi/10.1098/rsif.2020.0756">commonly used as a proxy</a> for this). While <code>{EpiEstim}</code> focuses on retrospective estimation of <img src="https://latex.codecogs.com/png.latex?R_t">, <code>{EpiNow2}</code> is designed for both retrospective and real-time estimation.</p>
<p>In estimating <img src="https://latex.codecogs.com/png.latex?R_t">, one practical consideration is the impact of various delays (biological and reporting) on the estimates <span class="citation" data-cites="charniga2024best park2024estimating gostic2020practical">(Charniga, Park, et al. 2024; Park et al. 2024; Katelyn M. Gostic 2020)</span>. <code>{EpiNow2}</code> adjusts for these delays in various ways. For example, it accounts for the symptom onset and reporting delays by taking the incubation period and reporting delay as inputs. Moreover, <code>{EpiNow2}</code> can estimate the reporting delay from the data if data on incidence by date of onset and report are available.</p>
<p>Furthermore, dedicated packages have emerged for estimating epidemiological delays from data using best practices. <a href="https://epidist.epinowcast.org/articles/epidist.html"><code>{epidist}</code></a> offers the ability to estimate delay distributions, accounting for issues such as truncation (i.e., not all disease outcomes will yet be known in real-time).</p>
<p>If delay data are not available, published estimates of the incubation period and serial interval can be used. The <a href="https://epiverse-trace.github.io/epiparameter/"><code>{epiparameter}</code></a> package collates a database of epidemiological distributions from the literature and provides functions for interacting with the database. You can view the <a href="https://epiverse-trace.github.io/epiparameter/dev/articles/database">database</a> for currently available parameters (more entries are planned). Additionally, if only summary statistics are available (e.g.&nbsp;range and median), <code>{epiparameter}</code> can be used to extract the distribution parameters.</p>
</section>
<section id="individual-level-transmissibility-superspreading" class="level4">
<h4 class="anchored" data-anchor-id="individual-level-transmissibility-superspreading">Individual-level transmissibility (superspreading)</h4>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>The individual-level transmission heterogeneity (superspreading), often denoted as <img src="https://latex.codecogs.com/png.latex?k">, is an important measure for tailoring interventions at the individual level.</p>
</div>
</div>
</div>
<p>If we have data on the distribution of sizes of transmission clusters, the <a href="https://epiverse-trace.github.io/epichains/"><code>{epichains}</code></a> package provides functions to set up the likelihood function to estimate <img src="https://latex.codecogs.com/png.latex?R_0"> and <img src="https://latex.codecogs.com/png.latex?k">. The user inputs the negative binomial offspring, which assumes individuals exhibit heterogeneity in transmission. The parameters of the negative offspring distribution can then be estimated using existing maximum likelihood or bayesian frameworks.</p>
<p>Furthermore, if we have individual-level transmission chain data, the <a href="https://epiverse-trace.github.io/superspreading/"><code>{superspreading}</code></a> package can be used to estimate <img src="https://latex.codecogs.com/png.latex?R_0"> and <img src="https://latex.codecogs.com/png.latex?k"> from the offspring distribution. This package also provides functions to estimate the probability that an outbreak will not go extinct in its early stages because of randomness in transmission (e.g.&nbsp;if the primary spillover case(s) does not infect others).</p>
<p>If we have data on sexual contacts and the secondary attack rate, then we can also use <code>{superspreading}</code> to <a href="https://epiverse-trace.github.io/superspreading/articles/heterogeneous_network_outbreaks.html">calculate <img src="https://latex.codecogs.com/png.latex?R_0"> accounting for network effects</a>.</p>
</section>
</section>
<section id="forecasting-and-nowcasting-infection-dynamics" class="level3">
<h3 class="anchored" data-anchor-id="forecasting-and-nowcasting-infection-dynamics">Forecasting and nowcasting infection dynamics</h3>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Forecasting and nowcasting of infections are crucial for planning and resource allocation during an outbreak. Forecasting is the prediction of future cases, deaths, or other outcomes, while nowcasting is the prediction of the current outbreak situation. These predictions can help public health authorities to anticipate the trajectory of the outbreak and to implement timely interventions.</p>
</div>
</div>
</div>
<p><a href="https://epiforecasts.io/EpiNow2/"><code>{EpiNow2}</code></a> and <a href="https://package.epinowcast.org/"><code>{epinowcast}</code></a> provide functions to forecast and nowcast the number of cases. The data required for <code>{EpiNow2}</code> has already been described in the previous section. The <code>{epinowcast}</code> package similarly requires data on the number of cases reported per date. <code>{epinowcast}</code> does not currently support forecasting but there are plans to add this functionality in future versions.</p>
</section>
<section id="estimating-disease-severity" class="level3">
<h3 class="anchored" data-anchor-id="estimating-disease-severity">Estimating disease severity</h3>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>The case fatality risk (CFR) is often used to assess the severity of a disease. CFR here refers to the proportion of deaths among confirmed cases.</p>
</div>
</div>
</div>
<p>With incidence data on the number of cases reported and the number of deaths reported, the <a href="https://epiverse-trace.github.io/cfr/"><code>{cfr}</code></a> package can be used to estimate the case fatality rate and its uncertainty. Importantly, it accounts for the delay between the onset of symptoms and death, which is crucial for accurate estimation of the case fatality rate.</p>
<p>Here again, <code>{EpiNow2}</code> can be used to estimate the time-varying case fatality ratio using the same data as for the reproduction number. <code>{EpiNow2}</code> can estimate other severity metrics, such as the case hospitalisation ratio, given data on cases and hospitalisations, and the hospitalisation fatality ratio, if data on hospitalisations and associated deaths are available.</p>
</section>
<section id="assessing-the-impact-of-interventions" class="level3">
<h3 class="anchored" data-anchor-id="assessing-the-impact-of-interventions">Assessing the impact of interventions</h3>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>mpox can be mitigated with behaviour change, treatment, and vaccination. Here, a few tools are available to assess the impact of intervention scenarios.</p>
</div>
</div>
</div>
<p><a href="https://epiverse-trace.github.io/epidemics/"><code>{epidemics}</code></a> provides ready compartmental models to estimate the impact of vaccination and non-pharmaceutical interventions like behaviour change, which can conceptually be modelled as a reduction in the transmission rate through changes in the population contact structure.</p>
<p>If we want to explore population-level outbreak dynamics, <code>{epidemics}</code> allows for stratifying the population into arbitrary groups, specifying the contact structure between these groups, and rates of interventions. The data required to run these models include: population structure, contact structure, and timing and magnitude of interventions. Data on social contact matrices can be obtained from the <a href="https://github.com/epiforecasts/socialmixr"><code>{socialmixr}</code></a> package.</p>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>In this post, we have outlined common outbreak analytics tasks relevant to the mpox outbreak, the data required, and R packages/tools that are currently available to facilitate these tasks. The tools described here are being developed by the Epiverse-TRACE team and the wider community, with the aim of ensuring high standards of research software development, and validation from end users, including epidemiologists, clinicians, and policy makers. The tools are designed to be user-friendly and well integrated, enabling one analysis task to easily feed into another. We <a href="https://epiverse-trace.github.io/get-involved.html">would therefore be keen to hear</a> from other groups interested in potentially collaborating or contributing on this growing ecosystem of tools.</p>
<p><em>Thanks to <a href="https://github.com/Karim-Mane">Karim Mane</a> and <a href="https://github.com/chartgerink">Chris Hartgerink</a> for their valuable comments on earlier drafts of this post.</em></p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0">
<div id="ref-charniga2024updating" class="csl-entry">
Charniga, Kelly, Andrea M McCollum, Christine M Hughes, Benjamin Monroe, Joelle Kabamba, Robert Shongo Lushima, Toutou Likafi, et al. 2024. <span>“Updating Reproduction Number Estimates for Mpox in the Democratic Republic of Congo Using Surveillance Data.”</span> <em>The American Journal of Tropical Medicine and Hygiene</em> 110 (3): 561. https://doi.org/<a href="https://doi.org/10.4269/ajtmh.23-0215">https://doi.org/10.4269/ajtmh.23-0215</a>.
</div>
<div id="ref-charniga2024best" class="csl-entry">
Charniga, Kelly, Sang Woo Park, Andrei R Akhmetzhanov, Anne Cori, Jonathan Dushoff, Sebastian Funk, Katelyn M Gostic, et al. 2024. <span>“Best Practices for Estimating and Reporting Epidemiological Delay Distributions of Infectious Diseases Using Public Health Surveillance and Healthcare Data.”</span> <em>arXiv Preprint arXiv:2405.08841</em>. https://doi.org/<a href="
https://doi.org/10.48550/arXiv.2405.08841"> https://doi.org/10.48550/arXiv.2405.08841</a>.
</div>
<div id="ref-gostic2020practical" class="csl-entry">
Katelyn M. Gostic, Edward B. Baskerville, Lauren McGough. 2020. <span>“Practical Considerations for Measuring the Effective Reproductive Number, Rt.”</span> <em>PLoS Computational Biology</em> 16 (12): e1008409. https://doi.org/<a href="https://doi.org/10.1371/journal.pcbi.1008409">https://doi.org/10.1371/journal.pcbi.1008409</a>.
</div>
<div id="ref-laurenson2023description" class="csl-entry">
Laurenson-Schafer, Henry, Nikola Sklenovská, Ana Hoxha, Steven M Kerr, Patricia Ndumbi, Julia Fitzner, Maria Almiron, et al. 2023. <span>“Description of the First Global Outbreak of Mpox: An Analysis of Global Surveillance Data.”</span> <em>The Lancet Global Health</em> 11 (7): e1012–23. https://doi.org/<a href="https://doi.org/10.1016/S2214-109X(23)00198-5">https://doi.org/10.1016/S2214-109X(23)00198-5</a>.
</div>
<div id="ref-park2024estimating" class="csl-entry">
Park, Sang Woo, Andrei R Akhmetzhanov, Kelly Charniga, Anne Cori, Nicholas G Davies, Jonathan Dushoff, Sebastian Funk, et al. 2024. <span>“Estimating Epidemiological Delay Distributions for Infectious Diseases.”</span> <em>medRxiv</em>, 2024–01. https://doi.org/<a href="https://doi.org/10.1101/2024.01.12.24301247">https://doi.org/10.1101/2024.01.12.24301247</a>.
</div>
<div id="ref-ward2022transmission" class="csl-entry">
Ward, Thomas, Rachel Christie, Robert S Paton, Fergus Cumming, and Christopher E Overton. 2022. <span>“Transmission Dynamics of Monkeypox in the United Kingdom: Contact Tracing Study.”</span> <em>Bmj</em> 379. https://doi.org/<a href="http://dx.doi.org/10.1136/ bmj-2022-073153">http://dx.doi.org/10.1136/ bmj-2022-073153</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://www.who.int/emergencies/disease-outbreak-news/item/2024-DON522">WHO Disease Outbreak News</a>↩︎</p></li>
<li id="fn2"><p><a href="https://www.cdc.gov/forecast-outbreak-analytics/about/modeling-forecasting/mpox-transmission.html">Modeling Household Transmission of Clade I Mpox in the United States</a>↩︎</p></li>
<li id="fn3"><p><a href="https://www.cdc.gov/forecast-outbreak-analytics/about/modeling-forecasting/mpox-gbmsm-technical-brief.html">Risk of Clade 1 Mpox Outbreaks Among Gay, Bisexual, and Other Men Who Have Sex With Men in the United States</a>↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{azam2024,
  author = {Azam, James and Gruson, Hugo and Kucharski, Adam},
  title = {2024 Mpox Outbreak: Common Analytics Tasks and Available {R}
    Tools},
  date = {2024-07-04},
  url = {https://epiverse-trace.github.io/posts/mpox-preparedness/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-azam2024" class="csl-entry quarto-appendix-citeas">
Azam, James, Hugo Gruson, and Adam Kucharski. 2024. <span>“2024 Mpox
Outbreak: Common Analytics Tasks and Available R Tools.”</span> July 4,
2024. <a href="https://epiverse-trace.github.io/posts/mpox-preparedness/">https://epiverse-trace.github.io/posts/mpox-preparedness/</a>.
</div></div></section></div> ]]></description>
  <category>Epiverse-TRACE</category>
  <category>mpox</category>
  <category>outbreak</category>
  <category>outbreak-analytics</category>
  <category>DOI</category>
  <guid>https://epiverse-trace.github.io/posts/mpox-preparedness/</guid>
  <pubDate>Thu, 04 Jul 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Choosing the Right Parent for R Object Classes</title>
  <dc:creator>Hugo Gruson</dc:creator>
  <link>https://epiverse-trace.github.io/posts/parent-class/</link>
  <description><![CDATA[ 





<p><a href="https://hugogruson.fr/posts/compa-tibble/">I have recently published</a> a <a href="https://epiverse-trace.github.io/posts/s3-generic/">series of blog posts</a> on the reasons why one may want to start using object-oriented programming (and more specifically R S3 classes) to improve interoperability with other tools from the ecosystem.</p>
<p>But there are still questions I have not addressed directly, even if they may have been implicitly included sometimes: what makes a good object class? What good practices in class &amp; function design can improve interoperability?</p>
<p>As you can expect from these questions, this post will present a subjective view on S3 class and method design. I will argue that it is often a good strategy to inherit from existing standards classes, and to leverage this inheritance relationship as much as possible.</p>
<section id="inherit-from-standard-classes" class="level2">
<h2 class="anchored" data-anchor-id="inherit-from-standard-classes">Inherit from standard classes</h2>
<p>A unique feature of R is the availability and centrality of <code>data.frame</code>s in the base language, whereas you need extra libraries for a similar functionality in most other languages (e.g., <a href="https://pandas.pydata.org/">pandas</a> in Python).</p>
<p><code>data.frame</code> is one of the first “complex” (in the sense of <a href="https://adv-r.hadley.nz/vectors-chap.html#atomic-vectors">non-atomic</a>) object most R learners will be exposed to and will develop a familiarity with. A good way to leverage this familiarity is to <a href="https://epiverse-trace.github.io/posts/extend-dataframes/">make your subclass a thin wrapper around <code>data.frame</code>s</a>.</p>
<p>This means that not only will users be able to get started with your package faster because of this familiarity, but you will also immediately benefit from the huge ecosystem of functions and packages working on <code>data.frame</code>s, such as the <a href="https://tidyverse.org">tidyverse</a>. If you want some examples, this is what collaborators and I did in the <a href="https://github.com/epiverse-trace/linelist">linelist</a>, <a href="https://github.com/rmaia/pavo">pavo</a>, <a href="https://github.com/epiforecasts/scoringutils">scoringutils</a>, <a href="https://github.com/epiverse-trace/epichains">epichains</a>, and <a href="https://github.com/epiverse-trace/vaccineff">vaccineff</a> R packages.</p>
<p>In some cases, the output is too complex to fit into a <code>data.frame</code>. Even in this situation, I would recommend inheriting from existing, well-established, classes for the same two reasons: familiarity and ecosystem. For example, for the <a href="https://github.com/epiverse-trace/serofoi">serofoi</a> R package, <a href="https://github.com/epiverse-trace/serofoi/pull/117">we have made the decision to inherit from <code>stanfit</code> objects, rather than a custom structure</a>.</p>
</section>
<section id="rely-on-parent-methods-as-much-as-possible" class="level2">
<h2 class="anchored" data-anchor-id="rely-on-parent-methods-as-much-as-possible">Rely on parent methods as much as possible</h2>
<p>A follow up recommendation from inheriting from standard classes is to leverage their methods wherever possible.</p>
<p><a href="https://github.com/epiverse-trace/linelist/pull/60">One of the first</a> <a href="https://github.com/epiverse-trace/linelist/pull/61">changes I made</a> when becoming maintainer of the <a href="https://github.com/epiverse-trace/linelist">linelist</a> package was to remove the <code>rename.linelist()</code> and <code>select.linelist()</code> methods. Indeed, they were, or could easily be, behaving identically as the parent <code>rename.data.frame()</code> and <code>select.data.frame()</code> methods. Rather than burdening the codebase and maintenance with an extra unnecessary method, it is much simpler and more robust to rely on the well-tested parent method. In fact, the <a href="https://dplyr.tidyverse.org/reference/dplyr_extending.html">dplyr documentation</a> explicitly recommends only writing methods for a couple of standard functions (including <code>[.subclass()</code> and <code>names&lt;-.subclass()</code>), which will enable the use of parent methods directly, rather than writing custom methods for each dplyr function.</p>
<p>Similarly, many developers have the reflex to write a custom <code>print.subclass()</code> method as part of the method implementation. While it may be justified in some cases, it is sometimes unnecessary. My recommendation would be to evaluate carefully what benefits the custom method brings over the default parent method.</p>
</section>
<section id="enable-conversion-to-standard-classes" class="level2">
<h2 class="anchored" data-anchor-id="enable-conversion-to-standard-classes">Enable conversion to standard classes</h2>
<p>If after careful consideration, extra metadata makes it too difficult to fit your new class into an existing class, you may sometimes have to define your own class from “scratch” (i.e., often <code>list()</code> in R).</p>
<p>But even in this case, you can still apply some of the ideas proposed earlier. As much as possible, you should provide helpers or methods to enable the streamlined conversion of your method to a standard class.</p>
<p>A good example here is the <a href="https://github.com/epiverse-trace/epiparameter">epiparameter</a> package, which provides a complex S3 class built on lists, including extensive metadata about probability distribution of epidemiological parameters. As such, this custom class cannot be used out of the box in most functions from other packages. <a href="https://github.com/epiverse-trace/epiparameter/blob/0f805b90f984def4851a78148f1cf44c3d480845/R/coercion.R#L18-L41">But an <code>as.function()</code> method is conveniently provided to enable the conversion of this probability distribution parameters into a density distribution</a>, which can then be used in functions which expect a <code>function</code> object.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In summary, I recommend relying on well-established parent classes such as <code>data.frame</code>s or at least providing direct conversion functions to these standard classes, and using parent methods wherever possible rather than writing custom dedicated methods. This should help produce a package:</p>
<ul>
<li>more easily accessible for users because it uses objects that feel familiar</li>
<li>more maintainable because a lot of method writing is offloaded to the parent class</li>
<li>more likely to be interoperable because standard classes are a good way to pass data between functions or packages</li>
</ul>
<p><strong>Thanks to Chris Hartgerink, James Azam and Josh Lambert, for their very valuable feedback on this post.</strong></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{gruson2024,
  author = {Gruson, Hugo},
  title = {Choosing the {Right} {Parent} for {R} {Object} {Classes}},
  date = {2024-06-26},
  url = {https://epiverse-trace.github.io/posts/parent-class/},
  doi = {10.59350/fk6nv-1k973},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-gruson2024" class="csl-entry quarto-appendix-citeas">
Gruson, Hugo. 2024. <span>“Choosing the Right Parent for R Object
Classes.”</span> June 26, 2024. <a href="https://doi.org/10.59350/fk6nv-1k973">https://doi.org/10.59350/fk6nv-1k973</a>.
</div></div></section></div> ]]></description>
  <category>R</category>
  <category>R package</category>
  <category>object-oriented programming</category>
  <category>S3</category>
  <category>interoperability</category>
  <category>DOI</category>
  <guid>https://epiverse-trace.github.io/posts/parent-class/</guid>
  <pubDate>Wed, 26 Jun 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>epidemics v0.4.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/epidemics_v0.4.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new epidemics version v0.4.0. Here is an automatically generated summary of the changes in this version.</p>
<p>Maintainer is changing to <span class="citation" data-cites="rozeggo">@rozeggo</span>.</p>
<section id="model-functions" class="level2">
<h2 class="anchored" data-anchor-id="model-functions">Model functions</h2>
<ol type="1">
<li>Internal model functions for the models which allow vaccination have been corrected to prevent vaccination introducing negative values of susceptibles; tests added to check for this (#235, initially reported by <span class="citation" data-cites="avallecam">@avallecam</span>).</li>
</ol>
</section>
<section id="helper-functions" class="level2">
<h2 class="anchored" data-anchor-id="helper-functions">Helper functions</h2>
<ol type="1">
<li><p>Added the <code>epidemic_peak()</code> function to calculate the timing and size of the largest peak in each compartment in an scenario model (#240) by <span class="citation" data-cites="bahadzie">@bahadzie</span>.</p></li>
<li><p>Added the <code>outcomes_averted()</code> function to compare epidemic scenarios (e.g.&nbsp;with and without interventions or vaccination) (#225, #230).</p></li>
</ol>
</section>
<section id="documentation" class="level2">
<h2 class="anchored" data-anchor-id="documentation">Documentation</h2>
<ol type="1">
<li><p>Adds a developer-focused vignette on how to modify epidemics and model structures to address potential modelling requests or tasks (#210).</p></li>
<li><p>Splits up the ‘Modelling uncertainty and scenarios’ vignette into separate vignettes on uncertainty and scenario comparisons (#225).</p></li>
<li><p>Removed unnecessary plots from the vignette on modelling vaccination (#235).</p></li>
<li><p>Fixed link to <em>socialmixr</em> package in the ‘Get started’ and ‘Modelling interventions’ vignettes.</p></li>
<li><p>Updated and added documentation for all new or modified functions.</p></li>
<li><p>Updated references JSON file.</p></li>
</ol>
</section>
<section id="package" class="level2">
<h2 class="anchored" data-anchor-id="package">Package</h2>
<ol type="1">
<li><p>Updated Codecov GitHub Actions workflow to restore code coverage reporting.</p></li>
<li><p>Updated package title and citation file.</p></li>
<li><p>Updated <code>_pkgdown.yaml</code> with new vignette and updated section titles.</p></li>
<li><p>Updated WORDLIST.</p></li>
</ol>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Epidemics V0.4.0},
  date = {2024-06-24},
  url = {https://epiverse-trace.github.io/posts/epidemics_v0.4.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Epidemics
V0.4.0.”</span> June 24, 2024. <a href="https://epiverse-trace.github.io/posts/epidemics_v0.4.0/">https://epiverse-trace.github.io/posts/epidemics_v0.4.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/epidemics_v0.4.0/</guid>
  <pubDate>Mon, 24 Jun 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>cleanepi v1.0.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/cleanepi_v1.0.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new cleanepi version v1.0.0. Here is an automatically generated summary of the changes in this version.</p>
<section id="first-major-release" class="level2">
<h2 class="anchored" data-anchor-id="first-major-release">first major release</h2>
<p>Initial CRAN submission of <a href="https://epiverse-trace.github.io/cleanepi/"><code>{cleanepi}</code></a>, an R package designed for cleaning, curating, and standardizing epidemiological data.</p>
<p>This release includes the following key functionalities:</p>
<ol type="1">
<li><p><strong>Removing irregularities</strong>: It removes duplicated and empty rows and columns, as well as columns with constant values.</p></li>
<li><p><strong>Handling missing values</strong>: It replaces missing values with the standard <code>NA</code> format, ensuring consistency and ease of analysis.</p></li>
<li><p><strong>Ensuring data integrity</strong>: It ensures the uniqueness of uniquely identified columns, thus maintaining data integrity and preventing duplicates.</p></li>
<li><p><strong>Date conversion</strong>: It offers functionality to convert character columns to Date format under specific conditions, enhancing data uniformity and facilitating temporal analysis. It also offers conversion of numeric values written in letters into numbers.</p></li>
<li><p><strong>Standardizing entries</strong>: It can standardize column entries into specified formats, promoting consistency across the dataset.</p></li>
<li><p><strong>Time span calculation</strong>: It calculates the time span between two elements of type <code>Date</code>, providing valuable demographic insights for epidemiological analysis.</p></li>
<li><p><strong>Reporting cleaning outcome</strong>: It displays the report that reflects the changes made on the input data during the cleaning process, hence allowing the user to amend on the cleaning operations.</p></li>
</ol>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Cleanepi V1.0.0},
  date = {2024-06-17},
  url = {https://epiverse-trace.github.io/posts/cleanepi_v1.0.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Cleanepi
V1.0.0.”</span> June 17, 2024. <a href="https://epiverse-trace.github.io/posts/cleanepi_v1.0.0/">https://epiverse-trace.github.io/posts/cleanepi_v1.0.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/cleanepi_v1.0.0/</guid>
  <pubDate>Mon, 17 Jun 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>readepi v0.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/readepi_v0.1.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new readepi version v0.1.0. Here is an automatically generated summary of the changes in this version.</p>
<p>This release contains the initial implementation of the package where data import from health information systems (HIS) depends on existing R packages designed specifically to retrieve data from a given HIS.</p>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Readepi V0.1.0},
  date = {2024-06-10},
  url = {https://epiverse-trace.github.io/posts/readepi_v0.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Readepi
V0.1.0.”</span> June 10, 2024. <a href="https://epiverse-trace.github.io/posts/readepi_v0.1.0/">https://epiverse-trace.github.io/posts/readepi_v0.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/readepi_v0.1.0/</guid>
  <pubDate>Mon, 10 Jun 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>epichains v0.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/epichains_v0.1.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new epichains version v0.1.0. Here is an automatically generated summary of the changes in this version.</p>
<section id="epichains-0.1.0" class="level2">
<h2 class="anchored" data-anchor-id="epichains-0.1.0">epichains 0.1.0</h2>
<p>We are excited to announce the first minor release of <code>{epichains}</code>.</p>
<p><code>{epichains}</code> re-implements <a href="https://github.com/epiverse-trace/bpmodels">{bpmodels}</a>, focusing on a unified simulation framework using branching processes to simulate transmission chains data. The framework incorporates susceptible depletion and pre-existing immunity and provides dedicated data structures for handling and analysing transmission chains in both tabular and vector formats. The goal is to provide seamless interoperability with other packages within the Epiverse-TRACE Initiative and the broader epidemiological tool ecosystem.</p>
</section>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New Features</h2>
<section id="documentation" class="level3">
<h3 class="anchored" data-anchor-id="documentation">Documentation</h3>
<ul>
<li><strong>Dedicated Website:</strong> Explore all features and documentation on the <a href="https://epiverse-trace.github.io/epichains/">epichains website</a>.</li>
<li><strong>Help:</strong> Each function comes with extensive documentation. We welcome your feedback and suggestions for improvements.</li>
<li><strong>Vignettes:</strong> This release comes with five detailed vignettes:
<ul>
<li><strong>Getting Started:</strong> A quick guide to the key functions.</li>
<li><strong>Modelling Disease Control Interventions:</strong> Learn how to model various intervention strategies.</li>
<li><strong>Projecting Infectious Disease Incidence:</strong> A case study on projecting COVID-19 incidence.</li>
<li><strong>Literature:</strong> A curation of literature on branching process applications in epidemiology.</li>
<li><strong>Theoretical Background:</strong> A deep dive into the theoretical background of the functions in the package (Contributor documentation).</li>
<li><strong>Design principles</strong>: The design principles of <code>{epichains}</code> (Contributor documentation).</li>
</ul></li>
</ul>
</section>
<section id="simulation" class="level3">
<h3 class="anchored" data-anchor-id="simulation">Simulation</h3>
<ul>
<li><strong><code>simulate_chains()</code></strong>: Simulate independent transmission chains from a specified number of initial cases, incorporating susceptible depletion and pre-existing immunity.</li>
<li><strong><code>simulate_chain_stats()</code></strong>: Generate a vector of chain sizes or lengths from a specified number of initial cases, incorporating susceptible depletion and pre-existing immunity.</li>
</ul>
</section>
<section id="inference" class="level3">
<h3 class="anchored" data-anchor-id="inference">Inference</h3>
<ul>
<li><strong><code>likelihood()</code></strong>: Estimate the (log)likelihood of transmission chain sizes or lengths, with support for numeric vectors or <code>&lt;epichains&gt;</code> and <code>&lt;epichains_summary&gt;</code> objects.</li>
</ul>
</section>
<section id="transmission-chain-data-manipulation" class="level3">
<h3 class="anchored" data-anchor-id="transmission-chain-data-manipulation">Transmission Chain Data Manipulation</h3>
<ul>
<li><strong><code>summary()</code></strong>: Extract vectors of chain sizes or lengths from <code>&lt;epichains&gt;</code> objects.</li>
<li><strong><code>aggregate()</code></strong>: Generate case time series by aggregating by generation or time of infection.</li>
<li><strong><code>plot()</code></strong>: Visualize individual transmission chains filtered by their id.</li>
</ul>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Epichains V0.1.0},
  date = {2024-06-10},
  url = {https://epiverse-trace.github.io/posts/epichains_v0.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Epichains
V0.1.0.”</span> June 10, 2024. <a href="https://epiverse-trace.github.io/posts/epichains_v0.1.0/">https://epiverse-trace.github.io/posts/epichains_v0.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/epichains_v0.1.0/</guid>
  <pubDate>Mon, 10 Jun 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>simulist v0.3.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/simulist_v0.3.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new simulist version v0.3.0. Here is an automatically generated summary of the changes in this version.</p>
<p>The third release of the <em>simulist</em> R package contains a range of new features, enhancements, documentation and unit tests.</p>
<p>The headline changes to the package are:</p>
<ul>
<li>The simulation is now parameterised with an infectious period rather than a contact interval.</li>
<li>Line list data now has <code>date_outcome</code> and <code>outcome</code> columns which can be parameterised with <code>onset_to_death</code> and <code>onset_to_recovery</code>.</li>
<li>Case fatality risk can vary through time with a customisable user-defined function.</li>
<li>Two new vignettes on time-varying case fatality risk, and wrangling line list and contact tracing data.</li>
</ul>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<section id="external" class="level3">
<h3 class="anchored" data-anchor-id="external">External</h3>
<ul>
<li><p><code>onset_to_hosp</code> and <code>onset_to_death</code> arguments can now take <code>NA</code> as input and will return a column of <code>NA</code>s in the line list columns <code>date_admission</code> and <code>date_outcome</code> (#98).</p></li>
<li><p>An <code>onset_to_recovery</code> argument has been added to the simulation functions, <code>sim_linelist()</code> and <code>sim_outbreak()</code>, and so the recovery date can be explicitly given in the line list data (#99).</p></li>
<li><p>The line list simulation can now use a time-varying case fatality risk. The <code>create_config()</code> function now returns a <code>$time_varying_death_risk</code> list element, which is <code>NULL</code> by default but can take an R function to enable the fatality risk of cases to change over the epidemic (#101).</p></li>
<li><p>A new vignette, <code>time-varying-cfr.Rmd</code>, has been added to the package to describe how to use the time-varying case fatality risk functionality and describe a few different time-varying functions that can be used (#101).</p></li>
<li><p>A new vignette, <code>wrangling-linelist.Rmd</code>, has been added to go over some of the common post-processing steps that might be required after simulating line list or contact tracing data. This vignette is short and currently only contains a single post-processing example, more examples will be added over time (#104).</p></li>
<li><p>The <code>README</code> now has a section on related projects to provide an overview of packages that simulate line list data, or are related to <em>simulist</em>. This section contains a disclosure widget containing a feature table providing a high-level description of the features and development status of each related package (#110).</p></li>
<li><p>A Key features section and Complimentary R packages section has been added to the <code>README</code> (#134).</p></li>
<li><p>Updated package architecture diagram in the <code>design-principles.Rmd</code> vignette (#113).</p></li>
</ul>
</section>
<section id="internal" class="level3">
<h3 class="anchored" data-anchor-id="internal">Internal</h3>
<ul>
<li><p>The <code>.add_deaths()</code> function has been replaced by the <code>.add_outcome()</code> function which can simulate death and recovery times (#99).</p></li>
<li><p><code>.cross_check_sim_input()</code> function has been added to the package to ensure user input is coherent across arguments (#98).</p></li>
<li><p><code>.anonymise()</code> function has been added to convert individual’s names into alphanumeric codes to anonymise individuals in line list and contact tracing data (#106).</p></li>
</ul>
</section>
</section>
<section id="breaking-changes" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<ul>
<li><p>The simulation functions are now parameterised with an infectious period (<code>infect_period</code> argument) instead of a contact interval (<code>contact_interval</code> argument). This moves away from parameterising the simulation with the time delay between a person becoming infected and having contact with a susceptible individual, and instead uses an infectious period distribution within which contacts are uniformly distributed in time (#96).</p></li>
<li><p>The simulation functions can now set a maximum as well as a minimum outbreak size. The <code>min_outbreak_size</code> argument in the exported <code>sim_*()</code> functions has been renamed <code>outbreak_size</code> and takes a <code>numeric</code> vector of two elements, the minimum and maximum outbreak size. The maximum outbreak size is a soft limit due to the stochastic nature of the branching process model, so epidemiological data returned can contain more cases and/or contacts that the maximum in <code>outbreak_size</code> but in these case a warning is returned explaining to the user how many cases/contacts are being returned (#93).</p></li>
<li><p>The <code>add_ct</code> argument in <code>sim_linelist()</code> and <code>sim_outbreak()</code> has been removed. The functionality is now equivalent to <code>add_ct = TRUE</code> in the previous <em>simulist</em> version. The <code>add_ct</code> argument was removed to move the package to always returning <code>&lt;data.frame&gt;</code>s with the same number of columns, for consistency and predictability (#104).</p></li>
<li><p>The <code>add_names</code> argument in the simulation functions has been renamed to <code>anonymise</code>. The new argument controls whether names are given to each case (<code>anonymise = FALSE</code>, default behaviour) or whether fixed length hexadecimal codes are given to each case (<code>anonymise = TRUE</code>), this ensures the returned <code>&lt;data.frame&gt;</code> has the same number of columns (#106).</p></li>
</ul>
</section>
<section id="bug-fixes" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes">Bug fixes</h2>
<ul>
<li><code>.sim_network_bp()</code> now indexes the time vector correctly. Previously a vector indexing bug meant the epidemic would not progress through time (#95).</li>
</ul>
</section>
<section id="deprecated-and-defunct" class="level2">
<h2 class="anchored" data-anchor-id="deprecated-and-defunct">Deprecated and defunct</h2>
<ul>
<li>None</li>
</ul>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p>Many thanks to the contributors to this release, either from issues, code contributions, reviews or discussions (listed in alphabetical order):</p>
<p><a href="https://github.com/adamkucharski"><span class="citation" data-cites="adamkucharski">@adamkucharski</span></a>, <a href="https://github.com/avallecam"><span class="citation" data-cites="avallecam">@avallecam</span></a>, <a href="https://github.com/Bisaloo"><span class="citation" data-cites="Bisaloo">@Bisaloo</span></a>, <a href="https://github.com/CarmenTamayo"><span class="citation" data-cites="CarmenTamayo">@CarmenTamayo</span></a>, <a href="https://github.com/chartgerink"><span class="citation" data-cites="chartgerink">@chartgerink</span></a>, <a href="https://github.com/jamesmbaazam"><span class="citation" data-cites="jamesmbaazam">@jamesmbaazam</span></a>, <a href="https://github.com/ntncmch"><span class="citation" data-cites="ntncmch">@ntncmch</span></a>, <a href="https://github.com/PaulC91"><span class="citation" data-cites="PaulC91">@PaulC91</span></a>, <a href="https://github.com/pratikunterwegs"><span class="citation" data-cites="pratikunterwegs">@pratikunterwegs</span></a>, and <a href="https://github.com/sbfnk"><span class="citation" data-cites="sbfnk">@sbfnk</span></a>.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Simulist V0.3.0},
  date = {2024-06-03},
  url = {https://epiverse-trace.github.io/posts/simulist_v0.3.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Simulist
V0.3.0.”</span> June 3, 2024. <a href="https://epiverse-trace.github.io/posts/simulist_v0.3.0/">https://epiverse-trace.github.io/posts/simulist_v0.3.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/simulist_v0.3.0/</guid>
  <pubDate>Mon, 03 Jun 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>epiparameter v0.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/epiparameter_v0.1.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new epiparameter version v0.1.0. Here is an automatically generated summary of the changes in this version.</p>
<p>Initial release of the {epiparameter} R package. {epiparameter} provides:</p>
<ol type="1">
<li><p>A library of epidemiological parameters extracted from the literature for a range of diseases.</p></li>
<li><p>Functions and classes (with class methods) to work with epidemiological parameters and distributions.</p></li>
</ol>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<ul>
<li>A library of 122 epidemiological parameter set from the epidemiological literature. This is accessible from the package as system data (<code>sysdata.rda</code>, as <code>epiparameter::multi_epidist</code>) or as internal data (<code>inst/extdata/parameters.json</code>).</li>
<li>The <code>epidist_db()</code> function loads epidemiological parameters from the library.</li>
<li>Distribution parameter conversion and extraction functions (<code>convert_params_to_summary_stats()</code> &amp; <code>convert_summary_stats_to_params()</code>, and <code>extract_param()</code>).</li>
<li>An S3 class to work with epidemiological parameters <code>&lt;epidist&gt;</code>. This class has S3 methods to aid users easily work with these data structures. These include printing, plotting, and distribution functions for PDF/PMF, CDF, random number generation and distribution quantiles. The <code>&lt;epidist&gt;</code> class has a constructor function, a validator function, accessors (<code>get_*()</code>), checkers (<code>is_*()</code>). There is also a <code>&lt;vb_epidist&gt;</code> S3 class for vector-borne parameters, and an internal <code>&lt;multi_epidist&gt;</code> class for improved printing of lists of <code>&lt;epidist&gt;</code> objects.</li>
<li>The package contains a few utility functions. <code>list_distributions()</code> is a helper function to provide information from a list of <code>&lt;epidist&gt;</code> objects in tabular form. <code>calc_disc_dist_quantile()</code> calculates the quantiles of a probability distribution based on the vector of probabilities and time data.</li>
<li>Five vignettes are included in this initial release. One as an introduction to the package (<code>epiparameter.Rmd</code>), one as an tutorial on converting and extracting parameters (<code>extract_convert.Rmd</code>), one on the protocol used to collect entries for the library of epidemiological parameters (<code>data_protocol.Rmd</code>), a design vignette (<code>design_principles.Rmd</code>), and a supplementary vignette which quantifies the bias from using the parameter extraction (<code>extract_param()</code>) from {epiparameter} (<code>extract-bias.Rmd</code>).</li>
<li>Unit tests (98% coverage) and documentation files.</li>
<li>Continuous integration workflows for R package checks, rendering the README.md, calculating test coverage, deploying the pkgdown website, updates the package citation, linting package code, checking package or system dependency changes, updating copyright year, and validating the parameter library JSON file.</li>
</ul>
</section>
<section id="breaking-changes" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<ul>
<li>None</li>
</ul>
</section>
<section id="bug-fixes" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes">Bug fixes</h2>
<ul>
<li>None</li>
</ul>
</section>
<section id="deprecated-and-defunct" class="level2">
<h2 class="anchored" data-anchor-id="deprecated-and-defunct">Deprecated and defunct</h2>
<ul>
<li>None</li>
</ul>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p>Many thanks to the contributors to this release, either from issues, code contributions, reviews or discussions (listed in alphabetical order):</p>
<p><a href="https://github.com/adamkucharski"><span class="citation" data-cites="adamkucharski">@adamkucharski</span></a>, <a href="https://github.com/avallecam"><span class="citation" data-cites="avallecam">@avallecam</span></a>, <a href="https://github.com/Bisaloo"><span class="citation" data-cites="Bisaloo">@Bisaloo</span></a>, <a href="https://github.com/CarmenTamayo"><span class="citation" data-cites="CarmenTamayo">@CarmenTamayo</span></a>, <a href="https://github.com/chartgerink"><span class="citation" data-cites="chartgerink">@chartgerink</span></a>, <a href="https://github.com/jamesmbaazam"><span class="citation" data-cites="jamesmbaazam">@jamesmbaazam</span></a>, <a href="https://github.com/maelle"><span class="citation" data-cites="maelle">@maelle</span></a>, <a href="https://github.com/pratikunterwegs"><span class="citation" data-cites="pratikunterwegs">@pratikunterwegs</span></a>, <a href="https://github.com/pitmonticone"><span class="citation" data-cites="pitmonticone">@pitmonticone</span></a>, <a href="https://github.com/sbfnk"><span class="citation" data-cites="sbfnk">@sbfnk</span></a>, and <a href="https://github.com/TimTaylor"><span class="citation" data-cites="TimTaylor">@TimTaylor</span></a>.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Epiparameter V0.1.0},
  date = {2024-05-30},
  url = {https://epiverse-trace.github.io/posts/epiparameter_v0.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Epiparameter
V0.1.0.”</span> May 30, 2024. <a href="https://epiverse-trace.github.io/posts/epiparameter_v0.1.0/">https://epiverse-trace.github.io/posts/epiparameter_v0.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/epiparameter_v0.1.0/</guid>
  <pubDate>Thu, 30 May 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>linelist v1.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/linelist_v1.1.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new linelist version v1.1.0. Here is an automatically generated summary of the changes in this version.</p>
<section id="breaking-changes" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<ul>
<li><p><code>make_linelist()</code> and <code>set_tags()</code> no longer accept a named list of characters as input. Instead, <code>make_linelist()</code>, <code>set_tags()</code> and <code>tags_types()</code> now use <a href="https://rlang.r-lib.org/reference/dyn-dots.html">rlang’s dynamic dots</a>, which means that you can splice list arguments. This implementation is more robust, better tested, and makes it explicit that users want to splice the list (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #96).</p>
<ul>
<li>Before:</li>
</ul>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">my_tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb1-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"case_ID"</span>,</span>
<span id="cb1-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_onset =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date_of_prodrome"</span>,</span>
<span id="cb1-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"age"</span>,</span>
<span id="cb1-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gender"</span></span>
<span id="cb1-6">)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(obj, my_tags)</span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># OR</span></span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(</span>
<span id="cb1-10">  obj,</span>
<span id="cb1-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"case_ID"</span>,</span>
<span id="cb1-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_onset =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date_of_prodrome"</span>,</span>
<span id="cb1-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"age"</span>,</span>
<span id="cb1-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gender"</span></span>
<span id="cb1-15">)</span></code></pre></div>
<ul>
<li>Now:</li>
</ul>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">my_tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"case_ID"</span>,</span>
<span id="cb2-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_onset =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date_of_prodrome"</span>,</span>
<span id="cb2-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"age"</span>,</span>
<span id="cb2-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gender"</span></span>
<span id="cb2-6">)</span>
<span id="cb2-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(obj, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!!!</span>my_tags)</span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># OR</span></span>
<span id="cb2-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(</span>
<span id="cb2-10">  obj,</span>
<span id="cb2-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"case_ID"</span>,</span>
<span id="cb2-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_onset =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date_of_prodrome"</span>,</span>
<span id="cb2-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"age"</span>,</span>
<span id="cb2-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gender"</span></span>
<span id="cb2-15">)</span></code></pre></div></li>
</ul>
</section>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<ul>
<li><p>linelist warnings and errors in the case of a tag loss now have a custom class (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #109), which means it is easier to silence them specifically, or to catch them programmatically for advanced error handling. One example of a new advanced condition handling that was before not possible is:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">warning_counter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">withCallingHandlers</span>({</span>
<span id="cb3-4">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> linelist<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(cars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_onset =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dist"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speed"</span>)</span>
<span id="cb3-5">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> x[, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb3-6">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> x[, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warning</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"This is not a linelist warning"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">call. =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb3-8">}, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linelist_warning =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(w) {</span>
<span id="cb3-9">  warning_counter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;&lt;-</span> warning_counter <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb3-10">})</span>
<span id="cb3-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Warning: The following tags have lost their variable:</span></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  age:speed</span></span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Warning: The following tags have lost their variable:</span></span>
<span id="cb3-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  date_onset:dist</span></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Warning: This is not a linelist warning</span></span>
<span id="cb3-16"></span>
<span id="cb3-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warning</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"This pipeline generated "</span>, warning_counter, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" linelist warnings."</span>)</span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Warning: This pipeline generated 2 linelist warnings.</span></span></code></pre></div></li>
<li><p>linelist objects now have a new custom <code>$&lt;-.linelist()</code> to prevent tag loss when subsetting a linelist object (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #86). This completes the functionality already provided by the <code>[&lt;-.linelist()</code> and <code>[[&lt;-.linelist()</code> methods.</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>tagged_column <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Warning in prune_tags(out, lost_action): The following tags have lost their variable:</span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  tag:tagged_column</span></span></code></pre></div></li>
<li><p>Validation failures in <code>validate_types()</code> now integrate a delayed error mechanism (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #106). This ensures that the error message will return all the invalid tag types at once rather than having to go through multiple trials and runs.</p>
<ul>
<li>Before: only the first invalid tag type is returned.</li>
</ul>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># No warning about age, even though it also has an invalid type</span></span>
<span id="cb5-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(cars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dist"</span>)</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">validate_types</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ref_types =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags_types</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"factor"</span>))</span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Error in validate_types(x, ref_types = tags_types(age = "factor")) : </span></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Issue when checking class of tag `gender`:</span></span>
<span id="cb5-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Must inherit from class 'character'/'factor', but has class 'numeric'</span></span></code></pre></div>
<ul>
<li>Now: the error message returns all the invalid tag types at once.</li>
</ul>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_linelist</span>(cars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dist"</span>)</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">validate_types</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ref_types =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags_types</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"factor"</span>))</span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Some tags have the wrong class:</span></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   - gender: Must inherit from class 'character'/'factor', but has class 'numeric'</span></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   - age: Must inherit from class 'factor', but has class 'numeric'</span></span></code></pre></div></li>
</ul>
</section>
<section id="internal-changes" class="level2">
<h2 class="anchored" data-anchor-id="internal-changes">Internal changes</h2>
<ul>
<li>Internal duplication in the specification of the tags supported by linelist by default has been removed. This makes it easier to add or remove tags in the future, and reduces the risk of inconsistencies between the different parts of the package (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #111).</li>
<li>The internal <code>tag_variable()</code> function has been replace by a vectorized alternative <code>tag_variable</code>, thus improving performance in <code>make_linelist()</code> and <code>set_tags()</code> about twofold. The error message when tags are specified by position with a number larger than the number of columns in the dataset to tag has also been clarified (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #110).</li>
</ul>
</section>
<section id="documentation" class="level2">
<h2 class="anchored" data-anchor-id="documentation">Documentation</h2>
<ul>
<li>linelist now provides a design vignette for future contributors or maintainers (<span class="citation" data-cites="Bisaloo">@Bisaloo</span>, #112).</li>
</ul>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Linelist V1.1.0},
  date = {2024-02-28},
  url = {https://epiverse-trace.github.io/posts/linelist_v1.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Linelist
V1.1.0.”</span> February 28, 2024. <a href="https://epiverse-trace.github.io/posts/linelist_v1.1.0/">https://epiverse-trace.github.io/posts/linelist_v1.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/linelist_v1.1.0/</guid>
  <pubDate>Wed, 28 Feb 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>epidemics v0.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/epidemics_v0.1.0/</link>
  <description><![CDATA[ 





<p>We would like to announce the realease on GitHub of version 0.1.0 of <em>epidemics</em>.</p>
<p>This release is aimed at supporting the reproducibility of <a href="https://gaza-projections.org/">analyses in this report</a>, which would be subject to breaking changes due to planned package development.</p>
<p>Please note that this version has not been released to CRAN. <em>epidemics</em> is still being actively developed, with major changes planned for the near future, which will soon supersede this version.</p>
<p><em>epidemics</em> v0.1.0 can be installed using the {pak} package from GitHub using <code>pak::pak("epiverse-trace/epidemics@v0.1.0")</code>.</p>
<p>Here is an automatically generated summary of the changes in this version.</p>
<p>This is an initial GitHub release of <em>epidemics</em>, an R package that ships a library of compartmental epidemic model structures that can be used, along with supplied classes that help define population characteristics and epidemic response interventions including vaccinations, to compose and model epidemic scenarios.</p>
<p>The sections below describe the contents of this release.</p>
<section id="model-structures" class="level2">
<h2 class="anchored" data-anchor-id="model-structures">Model structures</h2>
<p>This release of <em>epidemics</em> includes four model structures supporting a range of composable elements to modify epidemic trajectories.</p>
<ol type="1">
<li><p>“Default” model: A deterministic SEIR-V model allowing heterogeneity in social contacts between demographic groups, with optional, single-dose non-leaky vaccination;</p></li>
<li><p>“Vacamole” model: A deterministic SEI-HRD-V2 implementation of a model allowing heterogeneity in social contacts between demographic groups, with two-dose leaky vaccination (V2), supporting different infection trajectories through the infectious and hospitalised (H) compartments for doubly vaccinated individuals, which tracks deaths (D), and which was initially developed by the Dutch public health agency RIVM for vaccine impact modelling during the Covid-19 pandemic, and published as Ainslie et al.&nbsp;2022 <a href="https://doi.org/10.2807/1560-7917.ES.2022.27.44.2101090" class="uri">https://doi.org/10.2807/1560-7917.ES.2022.27.44.2101090</a>;</p></li>
<li><p>“Diphtheria” model: A deterministic SEIHR model tracking outcomes for different demographic groups, but not including heterogeneity in social contacts, adapted from Finger et al.&nbsp;2019 <a href="https://doi.org/10.1186/s12916-019-1288-7" class="uri">https://doi.org/10.1186/s12916-019-1288-7</a> and intended for application to disease outbreaks in a humanitarian camp setting;</p></li>
<li><p>“Ebola” model: A discrete time stochastic SEIHFR model suitable for modelling Ebola virus disease and other haemorrhagic fevers, and which allows varying the efficacy of isolation in a hospital setting (H), and allows modelling transmission in a funeral context (F), as adapted from a consensus Ebola virus disease model in Li et al.&nbsp;2019 <a href="https://doi.org/10.1098/rspb.2019.0774" class="uri">https://doi.org/10.1098/rspb.2019.0774</a> and using simulation methods from Getz and Dougherty 2018 <a href="https://doi.org/10.1080/17513758.2017.1401677" class="uri">https://doi.org/10.1080/17513758.2017.1401677</a>.</p></li>
</ol>
</section>
<section id="solving-ode-systems-using-boost-odeint" class="level2">
<h2 class="anchored" data-anchor-id="solving-ode-systems-using-boost-odeint">Solving ODE systems using Boost <em>odeint</em></h2>
<p><em>epidemics</em> uses Boost’s <em>odeint</em> <a href="https://www.boost.org/doc/libs/1_84_0/libs/numeric/odeint/doc/html/boost_numeric_odeint/getting_started/overview.html" class="uri">https://www.boost.org/doc/libs/1_84_0/libs/numeric/odeint/doc/html/boost_numeric_odeint/getting_started/overview.html</a> to treat the deterministic models’ ordinary differential equations (ODEs) as initial value problems and solve them.</p>
<p>Model ODEs are defined as <code>structs</code> with operators in the package headers, and exposed to R as internal Rcpp functions. The ‘default’, ‘Vacamole’, and ‘diphtheria’ models are ODE models defined in this way. This is intended to help reduce overheads associated with passing ODE systems written in R back and forth from a solver (such as those provided by {deSolve}), and is an easier way to define feature-rich models than writing C code for solvers provided by {deSolve} that accept compiled code.</p>
<p><em>epidemics</em> headers include tools for handling the C++ representations of R objects used in the package (see below), and can be imported by other Rcpp packages.</p>
<p>The ‘default’ and ‘Vacamole’ models have equivalent R-only implementations as well which use the {deSolve} package; these are intended to be made unavailable in future releases.</p>
</section>
<section id="composable-elements-as-classes" class="level2">
<h2 class="anchored" data-anchor-id="composable-elements-as-classes">Composable elements as classes</h2>
<p><em>epidemics</em> provides classes that help to organise the components of an epidemic scenario model.</p>
<ol type="1">
<li><p><code>&lt;population&gt;</code>: An S3 class to store population characteristics including the size of demographic groups, a social contacts matrix, and initial conditions for a model;</p></li>
<li><p><code>&lt;intervention&gt;</code>: An S3 abstract class and super-class that allows the definition of events that modify the epidemic trajectory:</p>
<ol type="a">
<li><p><code>&lt;rate_intervention&gt;</code>: A sub-class of <code>&lt;intervention&gt;</code> that allows the reduction of transition rates between model compartments to simulate the effect of policy interventions over a specific period;</p></li>
<li><p><code>&lt;contacts_intervention&gt;</code>: A sub-class of <code>&lt;intervention&gt;</code> that allows the reduction of social contacts to simulate the effect of policy interventions over a specific period;</p></li>
</ol></li>
<li><p><code>&lt;vaccination&gt;</code>: An S3 class that holds the intervals and group-specific rates at which individuals transition into the ‘vaccinated’ compartment(s) of a model, if available;</p></li>
</ol>
</section>
<section id="other-composable-elements" class="level2">
<h2 class="anchored" data-anchor-id="other-composable-elements">Other composable elements</h2>
<p><em>epidemics</em> allows models to include elements that affect an epidemic trajectory, but which are not custom classes.</p>
<ol type="1">
<li><p>Time-dependence: All models can be passed a list of functions with two arguments, <code>time</code> and <code>x</code> which are expected to return <code>x</code> as a function of <code>time</code>, and which may be used to model the effect of seasonality in model parameters;</p></li>
<li><p>Population changes: Applicable only to the diphtheria model, a two element list of <code>time</code> and <code>values</code>, which allow the definition of changes to the number of susceptible individuals in the model, and which may be used to model influxes and evacuations of individuals from humanitarian camps.</p></li>
</ol>
</section>
<section id="output-processing-functions" class="level2">
<h2 class="anchored" data-anchor-id="output-processing-functions">Output processing functions</h2>
<p><em>epidemics</em> provides functions to help process the output of an epidemic model run, to calculate the size of the epidemic in each demographic group at any stage (<code>epidemic_size()</code>), and to calculate the number of new infections in each demographic group at each timepoint in the model (<code>new_infections()</code>).</p>
</section>
<section id="usage-vignettes" class="level2">
<h2 class="anchored" data-anchor-id="usage-vignettes">Usage vignettes</h2>
<p><em>epidemics</em> includes a range of usage vignettes that demonstrate how to:</p>
<ol type="1">
<li><p>Get started with the package;</p></li>
<li><p>Get started with modelling interventions on social contacts to control outbreaks;</p></li>
<li><p>Model overlapping and sequential interventions on social contacts;</p></li>
<li><p>Model interventions that modify transition rates between model compartments;</p></li>
<li><p>Get started with modelling a vaccination campaign;</p></li>
<li><p>Model time-dependence and seasonality in disease transmission dynamics;</p></li>
<li><p>Generate and model uncertainty in model parameters;</p></li>
<li><p>Reduce the number of parameters required for final size estimation;</p></li>
<li><p>Use the ‘Vacamole’ model for scenarios of leaky vaccination and vaccine impact on hospitalisation;</p></li>
<li><p>Use the ‘Ebola’ model for scenarios of responses to an Ebola virus disease outbreak;</p></li>
<li><p>Use the ‘diphtheria’ model for scenarios of outbreaks in a humanitarian camp setting.</p></li>
</ol>
</section>
<section id="miscellaneous" class="level2">
<h2 class="anchored" data-anchor-id="miscellaneous">Miscellaneous</h2>
<ol type="1">
<li><p>Workflows to render the vignettes and README as a website;</p></li>
<li><p>Test code coverage of 93%.</p></li>
</ol>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Epidemics V0.1.0},
  date = {2024-02-27},
  url = {https://epiverse-trace.github.io/posts/epidemics_v0.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Epidemics
V0.1.0.”</span> February 27, 2024. <a href="https://epiverse-trace.github.io/posts/epidemics_v0.1.0/">https://epiverse-trace.github.io/posts/epidemics_v0.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/epidemics_v0.1.0/</guid>
  <pubDate>Tue, 27 Feb 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>simulist v0.2.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/simulist_v0.2.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new simulist version v0.2.0. Here is an automatically generated summary of the changes in this version.</p>
<p>Second release of <em>simulist</em>, updates the core simulation model and, as a result, the arguments for <code>sim_*()</code> functions for simulating line list data and/or contact table data exported from <em>simulist</em> are updated. The internal package architecture is also refactored.</p>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<section id="external" class="level3">
<h3 class="anchored" data-anchor-id="external">External</h3>
<ul>
<li><code>create_config()</code> now returns a new element in the list: <code>$network</code>. By default <code>create_config()</code> returns <code>network = "adjusted"</code>, which assumes the simulation is a random network and samples contacts with an excess degree distribution (see Details in <code>?create_config()</code>). The network effect can be changed to <code>"unadjusted"</code> to <em>switch off</em> the network effect. <code>$network</code> is checked internally (in <code>.sim_network_bp()</code>) and will error if not valid (#60).</li>
<li>Package architecture diagram is added to <code>design-principles.Rmd</code> (#66).</li>
<li>lintr GitHub action workflow (<code>lint-changed-files.yaml</code>) is added to the suite of continuous integration workflows (#68).</li>
<li>Transmission chain visualisation is added to <code>vis-linelist.Rmd</code> (#70).</li>
</ul>
</section>
<section id="internal" class="level3">
<h3 class="anchored" data-anchor-id="internal">Internal</h3>
<ul>
<li><code>.sim_network_bp()</code> is added as an internal function and replaces <code>bpmodels::chain_sim()</code> as the core simulation model producing contacted and infected individuals. <code>{bpmodels}</code> is removed as a dependency as a result (#60).</li>
<li><code>.sample_names()</code> is added as an internal function to utilise <code>randomNames::randomNames()</code> to produce more unique names than <code>randomNames(..., sample.with.replacement = FALSE)</code>.</li>
<li>Refactor of internal simulation architecture replaced <code>.sim_bp_linelist()</code>, <code>.sim_clinical_linelist()</code> and <code>.sim_contacts_tbl()</code> with <code>.sim_internal()</code> (#66).</li>
<li>The <code>sim_utils.R</code> file was renamed to <code>utils.R</code> (#66) and the empty <code>create_linelist.R</code> file was removed (#72).</li>
<li><code>.add_date_contact()</code> argument <code>outbreak_start_date</code> is now <code>NULL</code> by default instead of missing (#82).</li>
<li>Regression tests of <code>sim_*()</code> functions now use <a href="https://testthat.r-lib.org/articles/snapshotting.html">snapshot testing</a> for more detailed data checking (#65).</li>
<li>Internal testing data (<code>testdata</code>) files have been updated, as has the <code>testdata/README.md</code> with instructions (#64).</li>
</ul>
</section>
</section>
<section id="breaking-changes" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<ul>
<li><code>R</code> and <code>serial_interval</code> arguments have been removed from <code>sim_linelist()</code>, <code>sim_contacts()</code> and <code>sim_outbreak()</code> functions and instead <code>contact_distribution</code>, <code>contact_interval</code> and <code>prob_infect</code> are used to parameterise the simulation. Documentation, both functions and vignettes, have been updated with these changes (#60).</li>
<li>The <code>contact_distribution</code> argument in <code>sim_*()</code> functions requires a density function if supplied as an anonymous function. Information is added to <code>simulist.Rmd</code> to explain this.</li>
<li>The line list output from <code>sim_linelist()</code> now uses column header <code>sex</code> instead of <code>gender</code>. The contacts table output from <code>sim_contacts()</code> and <code>sim_outbreak()</code> now uses column headers <code>age</code> and <code>sex</code> instead of <code>cnt_age</code> and <code>cnt_gender</code> (#60, #79).</li>
<li><code>contact_distribution</code> is redefined and redocumented as the distribution of contacts per individual, rather than the number of contacts that do not get infected as it was in v0.1.0.</li>
<li><code>row.names</code> for <code>&lt;data.frame&gt;</code>s output by <code>sim_linelist()</code>, <code>sim_contacts()</code> and <code>sim_outbreak()</code> are now sequential from <code>1:nrows</code> (#63).</li>
</ul>
</section>
<section id="bug-fixes" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes">Bug fixes</h2>
<ul>
<li><code>sim_contacts()</code> now correctly runs with an age-structured population. In the previous version (v0.1.0), <code>sim_contacts()</code> did not call <code>.check_age_df()</code> and as a result the function errored, this is fixed as of PR #81.</li>
</ul>
</section>
<section id="deprecated-and-defunct" class="level2">
<h2 class="anchored" data-anchor-id="deprecated-and-defunct">Deprecated and defunct</h2>
<ul>
<li>None</li>
</ul>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p>Many thanks to the contributors to this release, either from issues, code contributions, reviews or discussions (listed in alphabetical order):</p>
<p><a href="https://github.com/adamkucharski"><span class="citation" data-cites="adamkucharski">@adamkucharski</span></a>, <a href="https://github.com/avallecam"><span class="citation" data-cites="avallecam">@avallecam</span></a>, <a href="https://github.com/Bisaloo"><span class="citation" data-cites="Bisaloo">@Bisaloo</span></a>, <a href="https://github.com/chartgerink"><span class="citation" data-cites="chartgerink">@chartgerink</span></a>, <a href="https://github.com/jamesmbaazam"><span class="citation" data-cites="jamesmbaazam">@jamesmbaazam</span></a>, <a href="https://github.com/pratikunterwegs"><span class="citation" data-cites="pratikunterwegs">@pratikunterwegs</span></a>, and <a href="https://github.com/sbfnk"><span class="citation" data-cites="sbfnk">@sbfnk</span></a>.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Simulist V0.2.0},
  date = {2024-02-23},
  url = {https://epiverse-trace.github.io/posts/simulist_v0.2.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Simulist
V0.2.0.”</span> February 23, 2024. <a href="https://epiverse-trace.github.io/posts/simulist_v0.2.0/">https://epiverse-trace.github.io/posts/simulist_v0.2.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/simulist_v0.2.0/</guid>
  <pubDate>Fri, 23 Feb 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>New team member: Chris Hartgerink</title>
  <dc:creator>Chris Hartgerink</dc:creator>
  <link>https://epiverse-trace.github.io/posts/chjh-intro-blog/</link>
  <description><![CDATA[ 





<p>In January, I joined Epiverse as part of my new role as Senior Software Engineer at <a href="https://data.org">data.org</a>. In the weeks since, I have been able to already meet a lot of members of the Epiverse community. Talking to you and hearing about what drives you, further excites me to be part of this community! In order to build on that and keep the energy flowing, I wanted to introduce myself here more broadly.</p>
<p>In this blog post, I share some of my background in R, my interest in open source, and how I look to contribute to this community. I want to already highlight that I love finishing things, from peanut butter jars to pull requests — so if you have anything that you’d like to pull over the finish line, I am more than happy to support in doing that!</p>
<section id="background-in-r" class="level2">
<h2 class="anchored" data-anchor-id="background-in-r">Background in R</h2>
<p>My first real introduction to programming was with R back in 2013, during a course on statistical programming. This was more about scripting than engineering, but it was where I dipped my toes. During my PhD at <a href="https://www.tilburguniversity.edu/about/schools/socialsciences/organization/departments/methodology-statistics">a methodology and statistics department</a>, I ended up becoming the go to person for getting mundane things done faster. I ended up writing R and shell scripts left and right, with most of them ending up being used only once. <a href="https://xkcd.com/1319">I wasted a lot of time</a> and had tons of fun doing this! I ended up writing scripts for my research as well, leading to some legal troubles with big publishers (<a href="https://www.chjh.nl/elsevier-stopped-me-doing-my-research/">see this old blog post</a>). Oops!</p>
<p>From scripting came contributing to R packages like <a href="https://cran.r-project.org/web/packages/statcheck/index.html"><code>statcheck</code></a>, from which came developing my own packages like <a href="https://cran.r-project.org/web/packages/retractcheck/index.html"><code>retractcheck</code></a>. Before I knew it I was helping others learn R and build their own packages in small workshops. This was back when the <code>devtools</code> experience was pretty decent but in no way as complete as it is today.</p>
<p>Around 2018, <a href="https://www.chjh.nl/reflections-on-my-phd/">I ended up leaving academia</a> and stopped needing to develop in R. I was not upset because R development is rather quirky and arbitrary at times. Since then, I have designed, built, and maintained production web applications in NodeJS, with my biggest achievement being <a href="https://www.researchequals.com">ResearchEquals</a>. I’m excited to bring the best of different languages together in this new position. Coming from NodeJS engineering, I already see some avenues for building a better developer experience in R. I look forward to not just contribute packages but also more general tooling during my time working on Epiverse.</p>
</section>
<section id="working-openly" class="level2">
<h2 class="anchored" data-anchor-id="working-openly">Working openly</h2>
<p>I come to open source through open science, which is all about reducing the “insiders” and “outsiders” of research. Can people access publications equitably? Can people contribute to the work that’s happening equitably? Are funds distributed equitably? There are still big barriers to accessing research, its institutions, and as a result there remain inequities in the knowledge that is produced.</p>
<p>As a natural extension of open science, I started getting involved with open source communities around 2015-2016. I started with smaller open source projects springboarding to bigger projects over time. I documented all my own research projects on GitHub and started building websites (e.g., one about <a href="https://libscie.github.io/libcopy/">copyright in research publishing</a>). All this practice developed my philosophy of working openly, which culminated in my time as a Mozilla Open Science Fellow in 2017.</p>
<p>With over a decade of practice, I approach <a href="https://wiki.mozilla.org/Working_open#Open_vs._Transparent">working openly</a> as community work. Open source is not just making information public - it requires making that information accessible and actionable. It has to be public <strong>and</strong> participatory. It needs to be informed by the needs of those participating, and participation needs to be encouraged, enabled, and scaffolded. This also means that the community needs to define what it desires. Are we working on a static piece of information that we want to enable reuse of (e.g., a finalized dataset) or do we want to co-create with people who we still need to invite in? People come and go, and so this community culture has to evolve.</p>
<p>Working openly, to me, also means that considerate and empathetic communication is key. It requires articulating our own needs, wants, and uncertainty with honesty. It requires accepting that our personal wants are not always aligned with what the community wants. How do we deal with those situations? Do we seek consensus or majorities? These discussions need humility and not getting entitled to things. It means actually listening to each other. There is no room for peacockery or posturing, but lots of room for caring and celebrating each other.</p>
</section>
<section id="contributing-to-epiverse" class="level2">
<h2 class="anchored" data-anchor-id="contributing-to-epiverse">Contributing to Epiverse</h2>
<p>I am excited to bring this philosophy of working open to Epiverse and vice versa, learn how this community is open in its own unique way. With an international community across three continents there are important questions around what it means to be participatory. After talking to various community members, it is clear this community raises important and practical questions. I am also intrigued to see what is preventing people from joining this community - what barriers are we unconsciously putting up?</p>
<p>I see my role within Epiverse as a <a href="https://en.wikipedia.org/wiki/Rush_goalie">“rush goalie”</a> (also known as a fly goalie). I will own the development and maintainance of specific pieces of software, yet I can leave those to actively support work throughout Epiverse. In short: I go where I am needed, in whatever form that may be. That can be software development, community engagement, and so much more.</p>
<p>To that end: Get in touch with me anytime you think I might be of support. Tag me on GitHub liberally (<code>@chartgerink</code>). Send me emails on <a href="mailto:chris@data.org" class="email">chris@data.org</a>. DM me wherever. I am here to support Epiverse and all its various packages in whatever shape they may need. This includes code reviews, making fixes, and being part of discussions. I would rather be tagged once too often than once too little.</p>
<p>Epiverse is also not a standalone community within the R space, so when practical, I will also contribute back to the packages that we use in our work. I already started making pull requests elsewhere, and it is great to see the R community be so welcoming to outside contributions. My hope is that Epiverse will be just as welcoming and a part of that wider ecosystem.</p>
<hr>
<p>At the moment, I am still finding my way throughout the various repositories. It takes time to understand new code and start identifying areas to contribute (and it’s not always as easy as can be). I will be checking in on the repositories (and there are a lot!) and may ask around to see whether PRs or issues are still relevant. Nonetheless, after several weeks, I am starting to feel more like a part of the community than a newbie.</p>
<p>Thanks for reading along and feel free to leave a comment if you have anything else you’d like to know.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Getting in touch
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can reach me on <a href="mailto:chris@data.org" class="email">chris@data.org</a> or on GitHub under <a href="https://github.com/chartgerink"><span class="citation" data-cites="chartgerink">@chartgerink</span></a>. I am also on Mastodon under <a href="https://akademienl.social/@chartgerink"><span class="citation" data-cites="chartgerink">@chartgerink</span><span class="citation" data-cites="akademienl.social">@akademienl.social</span></a>.</p>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{hartgerink2024,
  author = {Hartgerink, Chris},
  title = {New Team Member: {Chris} {Hartgerink}},
  date = {2024-02-15},
  url = {https://epiverse-trace.github.io/posts/chjh-intro-blog/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-hartgerink2024" class="csl-entry quarto-appendix-citeas">
Hartgerink, Chris. 2024. <span>“New Team Member: Chris
Hartgerink.”</span> February 15, 2024. <a href="https://epiverse-trace.github.io/posts/chjh-intro-blog/">https://epiverse-trace.github.io/posts/chjh-intro-blog/</a>.
</div></div></section></div> ]]></description>
  <category>Team</category>
  <guid>https://epiverse-trace.github.io/posts/chjh-intro-blog/</guid>
  <pubDate>Thu, 15 Feb 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Things that can go wrong when using renv</title>
  <dc:creator>Hugo Gruson</dc:creator>
  <link>https://epiverse-trace.github.io/posts/renv-complications/</link>
  <description><![CDATA[ 





<p>Throughout the Epiverse project, we use the <a href="https://rstudio.github.io/renv/">renv R package</a> to ensure reproducibility of the training materials and the pipelines we are providing. But we sometimes get reports from users who struggle to rebuild the environment and run the code.</p>
<p>In this post, we dissect the source of these issues, explain why in reality renv is not at fault, and how this is caused by the inherent complexity of reproducibility. The renv documentation already includes <a href="https://rstudio.github.io/renv/articles/renv.html#caveats">caveats</a> explaining why some situations are bound to require more complex tools. This blog post reiterates some of these caveats and illustrates them with concrete examples.</p>
<p>Finally, we mention a couple of more complete (but more complex!) frameworks that can overcome the issues presented here. We do not explore these alternative framework in detail but provide links to more information.</p>
<section id="binaries-vs-building-from-source" class="level2">
<h2 class="anchored" data-anchor-id="binaries-vs-building-from-source">Binaries vs building from source</h2>
<p>Software, including R packages, can generally be delivered in two forms: as binaries or as source code. If you are building from the source code, you may in some case need a compilation toolchain on your computer. If that toolchain is missing, it can lead to errors such as:</p>
<blockquote class="blockquote">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb1-1">ld: warning: search path '/opt/gfortran/lib' not found</span>
<span id="cb1-2">ld: library 'gfortran' not found</span></code></pre></div>
</blockquote>
<p>Most of the time, regular users of R will not see these errors because they are installing binaries. Indeed, CRAN provides pre-compiled binaries for Windows and macOS for the last version of the package and R.</p>
<p>With renv, you often want to install older versions of the packages, which won’t be available as binaries from CRAN. This means you are more likely to have to compile the package yourself and see this kind of errors, even though renv is not causing them.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
gfortran issues on Apple Silicon computers
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are an Apple Silicon (Mac M1, M2, M3) user and encounter issues with gfortran, we have had success using the <a href="https://github.com/coatless-mac/macrtools/">macrtools R package</a> and we strongly recommend checking it out.</p>
</div>
</div>
</section>
<section id="beyond-renv-scope-incompatibility-with-system-dependency-versions" class="level2">
<h2 class="anchored" data-anchor-id="beyond-renv-scope-incompatibility-with-system-dependency-versions">Beyond renv scope: incompatibility with system dependency versions</h2>
<p>We <a href="../system-dependencies/">discussed previously the topic of system dependencies</a>, and <a href="https://blog.r-hub.io/2022/09/12/r-dependency/">dependencies on specific R versions</a>. These special dependencies can also be a source of headaches when using renv.</p>
<p>The heart of the issue is that renv provides a simplified solution to reproducibility: it focuses on R packages and their versions. But other sources of non-reproducibility are outside its scope. In many cases, this will not be a problem, as the main source of non-reproducibility, especially in the relatively short-term, will be R package versions.</p>
<p>But sometimes, it is possible that the <code>renv.lock</code> lockfile requires such an old version of an R package that it was written with a syntax that is no longer supported by recent R versions or modern compilers.</p>
<p>For example, a recent project (from 2023) was trying to install the version 0.60.1 of the <code>matrixStats</code> package (from 2021). This lead to this compilation error:</p>
<blockquote class="blockquote">
<p>error: ‘DOUBLE_XMAX’ undeclared (first use in this function); did you mean ‘DBL_MAX’?</p>
</blockquote>
<!-- markdownlint-disable MD033 -->
<details>
<summary>
Click to see the full error message
</summary>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb2-1">! Error installing package 'matrixStats':</span>
<span id="cb2-2">=======================================</span>
<span id="cb2-3"></span>
<span id="cb2-4">* installing *source* package ‘matrixStats’ ...</span>
<span id="cb2-5">** package ‘matrixStats’ successfully unpacked and MD5 sums checked</span>
<span id="cb2-6">** using staged installation</span>
<span id="cb2-7">** libs</span>
<span id="cb2-8">using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span>
<span id="cb2-9">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c 000.init.c -o 000.init.o</span>
<span id="cb2-10">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c allocMatrix2.c -o allocMatrix2.o</span>
<span id="cb2-11">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c anyMissing.c -o anyMissing.o</span>
<span id="cb2-12">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c binCounts.c -o binCounts.o</span>
<span id="cb2-13">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c binMeans.c -o binMeans.o</span>
<span id="cb2-14">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c colCounts.c -o colCounts.o</span>
<span id="cb2-15">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c colOrderStats.c -o colOrderStats.o</span>
<span id="cb2-16">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c colRanges.c -o colRanges.o</span>
<span id="cb2-17">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c diff2.c -o diff2.o</span>
<span id="cb2-18">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c indexByRow.c -o indexByRow.o</span>
<span id="cb2-19">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c logSumExp.c -o logSumExp.o</span>
<span id="cb2-20">gcc -I"/usr/share/R/include" -DNDEBUG       -fpic  -g -O2 -ffile-prefix-map=/build/r-base-H0vbME/r-base-4.3.2=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c mean2.c -o mean2.o</span>
<span id="cb2-21">In file included from mean2_lowlevel.h:14,</span>
<span id="cb2-22">                 from mean2.c:9:</span>
<span id="cb2-23">mean2_lowlevel_template.h: In function ‘mean2_int’:</span>
<span id="cb2-24">mean2_lowlevel_template.h:59:13: error: ‘DOUBLE_XMAX’ undeclared (first use in this function); did you mean ‘DBL_MAX’?</span>
<span id="cb2-25">   59 |   if (sum &gt; DOUBLE_XMAX) {</span>
<span id="cb2-26">      |             ^~~~~~~~~~~</span>
<span id="cb2-27">      |             DBL_MAX</span>
<span id="cb2-28">mean2_lowlevel_template.h:59:13: note: each undeclared identifier is reported only once for each function it appears in</span>
<span id="cb2-29">In file included from mean2_lowlevel.h:18,</span>
<span id="cb2-30">                 from mean2.c:9:</span>
<span id="cb2-31">mean2_lowlevel_template.h: In function ‘mean2_dbl’:</span>
<span id="cb2-32">mean2_lowlevel_template.h:59:13: error: ‘DOUBLE_XMAX’ undeclared (first use in this function); did you mean ‘DBL_MAX’?</span>
<span id="cb2-33">   59 |   if (sum &gt; DOUBLE_XMAX) {</span>
<span id="cb2-34">      |             ^~~~~~~~~~~</span>
<span id="cb2-35">      |             DBL_MAX</span>
<span id="cb2-36">make: *** [/usr/lib/R/etc/Makeconf:191: mean2.o] Error 1</span>
<span id="cb2-37">ERROR: compilation failed for package ‘matrixStats’</span></code></pre></div>
</details>
<p>The explanation for this error can be found in <a href="https://github.com/HenrikBengtsson/matrixStats/blob/799669fc6de6f55a74cab06cc6a97634aa24ab0e/NEWS.md?plain=1#L111-L113">the <code>matrixStats</code> release notes</a>, specifically the section for matrixStats 0.63.0:</p>
<blockquote class="blockquote">
<ul>
<li>Updated native code to use the C99 constant <code>DBL_MAX</code> instead of legacy S constant <code>DOUBLE_XMAX</code>, which is planned to be unsupported in R (&gt;= 4.2.0).</li>
</ul>
</blockquote>
</section>
<section id="some-solutions" class="level2">
<h2 class="anchored" data-anchor-id="some-solutions">Some solutions</h2>
<section id="alternative-package-managers" class="level3">
<h3 class="anchored" data-anchor-id="alternative-package-managers">Alternative package managers</h3>
<p>We discussed how many issues when using renv can arise during the package compilation from source. A potential solution would be to avoid this compilation step and always install pre-compiled binaries.</p>
<p>This is not possible while installing from CRAN as CRAN only provides binaries for recent versions of R and for a limited number of platforms.</p>
<p>But Posit for example provides a larger collection of binaries, for different package versions, and different platforms, via their Public <a href="https://packagemanager.posit.co/">Posit Package Manager (PPM)</a>.</p>
<p>Making sure you install from PPM rather than CRAN can be a first simple step to make some of the issues discussed here vanish.</p>
</section>
<section id="extending-the-scope-of-reproducibility" class="level3">
<h3 class="anchored" data-anchor-id="extending-the-scope-of-reproducibility">Extending the scope of reproducibility</h3>
<p>Another solution could be to add more complex reproducibility solutions that go beyond the scope of renv.</p>
<section id="renv-with-rig" class="level4">
<h4 class="anchored" data-anchor-id="renv-with-rig">renv with rig</h4>
<p>The R version is specified in <code>renv.lock</code> and to avoid incompatibility of older package versions with newer versions of R, you could run the declared R version. This can be achieved with various means but a convenient solution is the <a href="https://github.com/r-lib/rig">rig</a> tool.</p>
<p>There are even some <a href="https://github.com/r-lib/rig/issues/131">discussions</a> to integrate rig and renv more tightly and let rig detect automatically which R version to use based on the <code>renv.lock</code> file.</p>
</section>
<section id="docker-nix-and-others" class="level4">
<h4 class="anchored" data-anchor-id="docker-nix-and-others">Docker, Nix and others</h4>
<p>Alternatively, you could use other reproducibility toolkits that focus not just on the R package versions, but on the entire software stack (e.g., including the operating system, the system dependencies). These solutions can be more complex to set up and use, and we won’t detail them in this blog post but you can find more information in:</p>
<ul>
<li><a href="https://rstudio.github.io/renv/articles/docker.html">The “Using renv with Docker” renv vignette</a></li>
<li><a href="https://doi.org/10.32614/RJ-2017-065">the “An Introduction to Rocker: Docker Containers for R” paper</a></li>
<li><a href="https://www.brodrigues.co/blog/2023-07-13-nix_for_r_part1/">Bruno Rodrigues’ entire series of blog posts on Nix</a></li>
</ul>
</section>
</section>
<section id="conclusion-a-final-note-for-developers" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-a-final-note-for-developers">Conclusion: a final note for developers</h3>
<p>renv is an elegant solution that focuses on the most immediate source of non-reproducibility. This however means it needs to be complemented by other tools in more complex cases.</p>
<p>Ultimately, reproducibility is a team effort. People who write code can minimise the risk of renv complications by keeping the packages they use close to their CRAN version and regularly updating their code and <code>renv.lock</code> accordingly. Other programming languages have automated tooling to help with this, via, e.g., the <a href="https://github.blog/2020-06-01-keep-all-your-packages-up-to-date-with-dependabot/">dependabot tool</a> which submits pull requests to update dependencies. There is no well established equivalent for R yet, but anyone willing to set this mechanism up can look at the code used by the <a href="https://github.com/carpentries/actions/tree/70ff4b4e8d50fdcd0eb33e7c33a4a6f305a82702/update-lockfile">Carpentries workbench</a> for this task.</p>
<p><em>Thanks to Pratik Gupte and Chris Hartgerink for their valuable comments on earlier drafts of this post.</em></p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{gruson2024,
  author = {Gruson, Hugo},
  title = {Things That Can Go Wrong When Using Renv},
  date = {2024-01-31},
  url = {https://epiverse-trace.github.io/posts/renv-complications/},
  doi = {10.59350/hsy4m-6se90},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-gruson2024" class="csl-entry quarto-appendix-citeas">
Gruson, Hugo. 2024. <span>“Things That Can Go Wrong When Using
Renv.”</span> January 31, 2024. <a href="https://doi.org/10.59350/hsy4m-6se90">https://doi.org/10.59350/hsy4m-6se90</a>.
</div></div></section></div> ]]></description>
  <category>R</category>
  <category>reproducibility</category>
  <category>renv</category>
  <category>DOI</category>
  <guid>https://epiverse-trace.github.io/posts/renv-complications/</guid>
  <pubDate>Wed, 31 Jan 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>superspreading v0.2.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/superspreading_v0.2.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new superspreading version v0.2.0. Here is an automatically generated summary of the changes in this version.</p>
<p>Second minor release of <em>superspreading</em>. This release enhances functions added in v0.1.0 and adds two new exported functions, and two new vignettes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(superspreading)</span></code></pre></div>
</div>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<ul>
<li>A new function (<code>calc_network_R()</code>) to estimate the reproduction number for heterogeneous networks and a vignette outlining use cases for the function from existing epidemiological literature is added (#71).</li>
<li><code>probability_epidemic()</code> and <code>probability_extinct()</code> now have individual-level and population-level control in a joint framework (#70).</li>
<li><code>proportion_*()</code> functions can now return proportion columns of the output <code>&lt;data.frame&gt;</code> as <code>numeric</code> when the new argument <code>format_prop</code> is set to <code>FALSE</code> (#72).</li>
<li>A new design principles vignette to document package development is added (#68).</li>
<li>Added a helper function (<code>ic_tbl()</code>) to improve model comparison tables (#65).</li>
<li><code>probability_*()</code> functions now accept <a href="https://rlang.r-lib.org/reference/dyn-dots.html">dynamic dots</a> (<a href="https://CRAN.R-project.org/package=rlang">{rlang}</a> is added as a dependency) (#82).</li>
</ul>
</section>
<section id="breaking-changes" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<ul>
<li><code>ind_control</code> and <code>pop_control</code> arguments replace <code>control</code> and <code>control_type</code> arguments in <code>probability_contain()</code>; and the argument default for <code>num_init_infect</code> is removed (#70).</li>
<li>Changed <code>epidist</code> argument to <code>offspring_dist</code> to follow Epiverse style (affects several functions) (#64).</li>
<li>Argument in <code>proportion_transmission()</code> has been renamed from <code>sim</code> to <code>simulate</code> (#81).</li>
</ul>
</section>
<section id="minor-changes" class="level2">
<h2 class="anchored" data-anchor-id="minor-changes">Minor changes</h2>
<ul>
<li>New package hex logo (#73).</li>
<li>Updated continuous integration and package infrastructure (#67).</li>
<li>Improved function documentation (#63).</li>
<li>Optimisation now uses <code>optim()</code> by default (#82).</li>
<li>Testing suite now uses snapshot testing for regression tests (#84).</li>
</ul>
</section>
<section id="bug-fixes" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes">Bug fixes</h2>
<ul>
<li>None to {superspreading} functions.</li>
<li>Update {epiparameter} use in vignette and tests (#62).</li>
</ul>
</section>
<section id="deprecated-and-defunct" class="level2">
<h2 class="anchored" data-anchor-id="deprecated-and-defunct">Deprecated and defunct</h2>
<ul>
<li>None</li>
</ul>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Superspreading V0.2.0},
  date = {2024-01-29},
  url = {https://epiverse-trace.github.io/posts/superspreading_v0.2.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Superspreading
V0.2.0.”</span> January 29, 2024. <a href="https://epiverse-trace.github.io/posts/superspreading_v0.2.0/">https://epiverse-trace.github.io/posts/superspreading_v0.2.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/superspreading_v0.2.0/</guid>
  <pubDate>Mon, 29 Jan 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>simulist v0.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/simulist_v0.1.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new simulist version v0.1.0. Here is an automatically generated summary of the changes in this version.</p>
<p>Initial release of <em>simulist</em>, an R package containing tools to simulate epidemiological data such as line lists and contact tables.</p>
<section id="new-features" class="level2">
<h2 class="anchored" data-anchor-id="new-features">New features</h2>
<ul>
<li>A set of simulation functions to simulate epidemiological data. These simulation functions contain arguments that allow for the simulation to be flexibly parameterised to be generated under specified epidemiological or demographic conditions.
<ul>
<li><code>sim_linelist()</code>: simulate line list data</li>
<li><code>sim_contacts()</code>: simulate contacts data</li>
<li><code>sim_outbreak()</code>: simulate both line list and contacts data</li>
</ul></li>
<li>Four general vignettes
<ul>
<li>Get Started vignette (<code>simulist.Rmd</code>)</li>
<li>Age-stratified hospitalisation and death risks vignette (<code>age-strat-risks.Rmd</code>)</li>
<li>Age structured population vignette (<code>age-struct-pop.Rmd</code>)</li>
<li>Visualising simulated data (<code>vis-linelist.Rmd</code>)</li>
</ul></li>
<li>One developer focused vignette
<ul>
<li>Design Principles for {simulist} (<code>design-principles.Rmd</code>)</li>
</ul></li>
<li>Unit tests (100% code coverage) and documentation files.</li>
<li>Continuous integration workflows for R package checks, rendering the README.md, calculating test coverage, deploying the pkgdown website, updating the citation file, and checking new package or system dependencies.</li>
</ul>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2024,
  author = {Epiverse-TRACE development team, The},
  title = {Simulist V0.1.0},
  date = {2024-01-09},
  url = {https://epiverse-trace.github.io/posts/simulist_v0.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2024" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2024. <span>“Simulist
V0.1.0.”</span> January 9, 2024. <a href="https://epiverse-trace.github.io/posts/simulist_v0.1.0/">https://epiverse-trace.github.io/posts/simulist_v0.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/simulist_v0.1.0/</guid>
  <pubDate>Tue, 09 Jan 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>cfr v0.1.0</title>
  <dc:creator>The Epiverse-TRACE development team</dc:creator>
  <link>https://epiverse-trace.github.io/posts/cfr_v0.1.0/</link>
  <description><![CDATA[ 





<p>We are very excited to announce the release of a new cfr version v0.1.0. Here is an automatically generated summary of the changes in this version.</p>
<p>Initial CRAN submission of <em>cfr</em>, an R package to estimate the severity of a disease and ascertainment of cases while correcting for delays in outcomes of reported cases being known.</p>
<p>This release includes:</p>
<ol type="1">
<li>Functions for the overall severity of an outbreak, the overall severity of an outbreak estimated with an expanding time series of data, and the time-varying severity of an outbreak,</li>
<li>A function to estimate the number of outcomes to be expected from a given number of cases assuming a user-specified distribution of delays between cases and outcomes being known,</li>
<li>A function to estimate the overall (static) ascertainment of cases in an outbreak by comparing the relevant severity measures against a user-specified baseline severity (note that functionality for time-varying ascertainment is expected to be included in future versions, and an older implementation of this functionality was removed just prior to release),</li>
<li>A data preparation generic with an S3 method for the <code>&lt;incidence2&gt;</code> class from the <em>incidence2</em> package,</li>
<li>Example daily case and death data from the 1976 Ebola Virus Disease outbreak as reported in Camacho et al.&nbsp;(2014). <a href="https://doi.org/10.1016/j.epidem.2014.09.003" class="uri">https://doi.org/10.1016/j.epidem.2014.09.003</a>,</li>
<li>Example daily case and death data from the Covid-19 pandemic over the range 2020-01-01 to 2022-12-31 from the 19 countries with over 100,00 deaths over this period, as taken from the <em>covidregionaldata</em> package which is no longer on CRAN,</li>
<li>Vignettes describing how to get started with severity estimation, and more detailed workflows on different kinds of severity estimation,</li>
<li>A vignette on working with data from the <em>incidence2</em> package, and a vignette on working with delay distributions,</li>
<li>100% code coverage,</li>
<li>Workflows to render the vignettes and README as a website.</li>
</ol>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{epiverse-trace_development_team2023,
  author = {Epiverse-TRACE development team, The},
  title = {Cfr V0.1.0},
  date = {2023-11-22},
  url = {https://epiverse-trace.github.io/posts/cfr_v0.1.0/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-epiverse-trace_development_team2023" class="csl-entry quarto-appendix-citeas">
Epiverse-TRACE development team, The. 2023. <span>“Cfr V0.1.0.”</span>
November 22, 2023. <a href="https://epiverse-trace.github.io/posts/cfr_v0.1.0/">https://epiverse-trace.github.io/posts/cfr_v0.1.0/</a>.
</div></div></section></div> ]]></description>
  <category>new-release</category>
  <guid>https://epiverse-trace.github.io/posts/cfr_v0.1.0/</guid>
  <pubDate>Wed, 22 Nov 2023 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Using benchmarking to guide the adoption of dependencies in R packages</title>
  <dc:creator>James Mba Azam</dc:creator>
  <link>https://epiverse-trace.github.io/posts/benchmarking_design_decisions/</link>
  <description><![CDATA[ 





<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(bench)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cli)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span></code></pre></div>
</div>
<p>R package developers often have to take on dependencies for various reasons. Dependencies are external packages that provide extra functionalities or features to another package <span class="citation" data-cites="wickham2023r">(Wickham and Bryan 2023)</span>. Quite often, the goal of taking on a dependency is to utilize its rich features and reduce duplicated coding effort. For example, the <code>ggplot2</code> package is often adopted, instead of R’s inbuilt plotting functions, to make visualizations using its declarative system and implementation of the Grammar of Graphics, and slick automation across the board.</p>
<p>Sometimes, introducing a dependency might slow down existing processes. Hence, it is important to consider the speed of a dependency’s functions before adopting it. Code optimisation is often reserved for heavy processes like data processing steps. However, here, we will focus on lesser optimised processes, and in particular, printing of texts in R.</p>
<p>For this demonstration, we will look at a situation where a package developer is considering options for condition signalling beyond the functionalities provided in base R. Condition signalling refers to the process of communicating to a user that an issue has arisen during code execution <span class="citation" data-cites="wickham2019advanced">(Wickham 2019)</span>.</p>
<p>Base R ships with functionalities for condition signalling. There is <code>base::stop()</code> for signalling errors. Errors refer to cases where something fatal happens during code execution so that it halts, for example, when a function is run without specifying the required arguments.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>()</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in rnorm(): argument "n" is missing, with no default</code></pre>
</div>
</div>
<p>Base R provides <code>base::warning()</code> for throwing warnings. Warnings are used to handle less fatal issues with code execution that do not need to halt the process. For example, when you compare two vectors of different lengths, R will throw a warning but will still return a result.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in c(1:2) &gt; c(1:3): longer object length is not a multiple of shorter
object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Lastly, there is <code>base::message()</code> for throwing messages. Messages are used to provide useful information about processes. For example, packages throw messages about NAMESPACE conflicts when loaded. This is to inform the user so they know what next steps to take.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(data.table)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    between, first, last</code></pre>
</div>
</div>
<p>These base R functions are, however, not flexible enough for advanced formatting: colour, progress bar, contextual pluralisation, and so forth. The package developer might want to adopt external dependencies for these flexibilities. The <a href="https://cli.r-lib.org/articles/semantic-cli.html">cli</a> package is well designed for this. <code>cli</code> offers many of the advanced formatting features. Here is a quick example (adopted from the help file) using <code>cli::cli_abort()</code>, the equivalent of <code>base::stop()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"c(1, 2, 3)"</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cli_abort</span>(</span>
<span id="cb10-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb10-4">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{.var n} must be a numeric vector"</span>,</span>
<span id="cb10-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"You've supplied a {.cls {class(n)}} vector."</span></span>
<span id="cb10-6">    )</span>
<span id="cb10-7">)</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error:
! `n` must be a numeric vector
✖ You've supplied a &lt;character&gt; vector.</code></pre>
</div>
</div>
<p>In this example, we used inline text formatting to print <code>n</code> as a variable and interpolated code to print the class of <code>n</code> in the error message and all in just 6 lines of code.</p>
<p>If this is enough to excite your interests, check out <code>cli</code>’s <a href="https://cli.r-lib.org/">website</a> and help files, which provide in-depth guides on its myriad features.</p>
<p>Now, considering all these amazing features that <code>cli</code> offers, what should a package developer consider to adopt it? In this article, we will demonstrate how to use (micro)benchmarking<sup>1</sup> to guide the decision through the lense of speed. Benchmarking can be used to check whether adopting <code>cli</code> as a dependency would slow down existing printing processes in undesirable ways.</p>
<p>Here, we will benchmark <code>cli::cli_warn()</code> against base R’s <code>base::warning()</code> to see if the former has any speed issues. The results of this exercise will provide us with insights on whether its worth taking on <code>cli</code> for its features as a trade-off for slower printing speed.</p>
<section id="experiment" class="level2">
<h2 class="anchored" data-anchor-id="experiment">Experiment</h2>
<p>We will consider different scenarios of number of warnings thrown to tease out the relationship between speed of the function and number of warnings thrown in a function with and without <code>cli::cli_warn()</code>. We will also check how the benchmark scales with the number of warnings in the function.</p>
<p>Based on this description, we will need the following packages: <code>cli</code> for its warning function, and <a href="https://cran.r-project.org/web/packages/bench/index.html">bench</a> for measuring the run times, <a href="https://dplyr.tidyverse.org/">dplyr</a> for manipulating the results, and <a href="https://ggplot2.tidyverse.org/">ggplot2</a> for plotting.</p>
<p>Let’s define a function that takes an argument <code>n</code> for the number of warnings to throw and <code>pkg</code> for the type of package to use.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">warn_Ntimes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(n, pkg) {</span>
<span id="cb12-2">  warning_msg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x must be an integer"</span></span>
<span id="cb12-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">switch</span>(pkg,</span>
<span id="cb12-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(n)) {</span>
<span id="cb12-5">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warning</span>(warning_msg)</span>
<span id="cb12-6">    },</span>
<span id="cb12-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cli =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(n)) {</span>
<span id="cb12-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cli_warn</span>(warning_msg)</span>
<span id="cb12-9">    }</span>
<span id="cb12-10">  )</span>
<span id="cb12-11">}</span></code></pre></div>
</div>
<p>Let’s test our function to see if it works as expected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warn_Ntimes</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"base"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in warn_Ntimes(3, "base"): x must be an integer

Warning in warn_Ntimes(3, "base"): x must be an integer

Warning in warn_Ntimes(3, "base"): x must be an integer</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warn_Ntimes</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cli"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: x must be an integer</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: x must be an integer
x must be an integer</code></pre>
</div>
</div>
<p>Now, we’ll consider scenarios where a function throws 1, 5, 10, 15, 20, and 100 warnings using base R and <code>cli</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Number of warnings to throw</span></span>
<span id="cb18-2">warnings <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span></code></pre></div>
</div>
<p>Let’s run benchmarks over the different scenarios and store results in a data.frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">bnmark_res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">press</span>(</span>
<span id="cb19-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">warnings =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>),</span>
<span id="cb19-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mark</span>(</span>
<span id="cb19-4">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cli =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warn_Ntimes</span>(warnings, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cli"</span>),</span>
<span id="cb19-5">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warn_Ntimes</span>(warnings, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"base"</span>)</span>
<span id="cb19-6">    )</span>
<span id="cb19-7">  )</span></code></pre></div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>It’s time to explore the results of the data generated. Let’s first make a boxplot of the run times for the different scenarios.</p>
<p>Drum roll please…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(</span>
<span id="cb20-2">  bnmark_res,</span>
<span id="cb20-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"boxplot"</span></span>
<span id="cb20-4">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb20-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Package"</span>,</span>
<span id="cb20-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Functions throwing various numbers of warnings as indicated in the facet label"</span></span>
<span id="cb20-8">  )</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required namespace: tidyr</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://epiverse-trace.github.io/posts/benchmarking_design_decisions/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now, let’s see how the benchmarks scale with the number of warnings thrown.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">bnmark_res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>pkg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(bnmark_res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expression, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"description"</span>)</span>
<span id="cb22-2"></span>
<span id="cb22-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(bnmark_res) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(</span>
<span id="cb22-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb22-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> warnings,</span>
<span id="cb22-7">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> median,</span>
<span id="cb22-8">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> pkg</span>
<span id="cb22-9">    ),</span>
<span id="cb22-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb22-11">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb22-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of warnigns"</span>,</span>
<span id="cb22-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Median execution time"</span>,</span>
<span id="cb22-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Package"</span></span>
<span id="cb22-16">  )</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://epiverse-trace.github.io/posts/benchmarking_design_decisions/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As we can see, <code>cli</code> is consistently slower than base R for the same number of warnings thrown. The median times also follow a similar non-linear trajectory. Benchmarking experiments with other <code>cli</code> functions have revealed similar non-linear relationships between its speed and the number of times it invokes those functions <sup>2</sup>. However, those exercises were not compared with equivalent functions in base R. The relative comparison here is useful for decision-making.</p>
<p>The developers of <code>cli</code> have also conducted benchmarks of the <code>ansi_*()</code> family of functions in <code>cli</code> in comparison to base R and the <code>fansi</code> package. They find that <code>cli</code> is consistently slower than base R, which corroborates the results of our experiment here. These benchmarks are available in the <code>cli</code> documentation <sup>3</sup>.</p>
<p>So, should we be worried about the speed of <code>cli</code>? Well, it depends on the context. The “R Packages” book by Hadley Wickham and Jenny Bryan suggests approaching such a decision from a holistic, balanced, and quantitative approach<span class="citation" data-cites="wickham2023r">(Wickham and Bryan 2023)</span>. We’ll leave the reader to make their own decision based on their use case.</p>
<p>Most developers might argue that this is an optimisation overkill<sup>4</sup>. However, it is important to consider speed differences in context. In the case of simple printing, the speed difference is negligible yet disruptive and somewhat painful. However, in the grand scheme of things, this might be nothing compared with much slower processes that need more attention. In those cases, the developer might want to consider other optimisation strategies such as profiling <sup>5</sup>. The essence of this experiment is to demonstrate the utility of benchmarking in making quick design decisions.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In designing R package infrastructure with dependencies, it might sometimes be necessary to check if they don’t slow down existing processes. Here, we have demonstrated how benchmarking is one way to achieve this for a process involving condition signalling. We show how a simple decision to use <code>cli::cli_warn()</code> to handle warnings could come at the cost of a tiny loss in speed, which is worth considering in its context.</p>
<p>The demonstration here can be extended to other dependency adoption decisions for input checking, loops, object manipulations, and so forth. We recommend benchmarking as a way to help developers make quick design decisions. However, we also recommend that developers consider the context of the optimisation in interpreting the results.</p>
<p><em>I would like to thank <a href="https://github.com/pratikunterwegs">Pratik Gupte</a>, <a href="https://github.com/joshwlambert">Joshua Lambert</a>, and <a href="https://github.com/Bisaloo">Hugo Gruson</a> for their invaluable reviews and suggestions that helped improve this post.</em></p>
</section>
<section id="other-r-packages-for-benchmarking" class="level2">
<h2 class="anchored" data-anchor-id="other-r-packages-for-benchmarking">Other R packages for benchmarking</h2>
<ul>
<li><a href="https://github.com/joshuaulrich/microbenchmark">microbenchmark</a>: an R package for comparing the execution time of R expressions.</li>
<li><a href="https://code.google.com/archive/p/rbenchmark/">rbenchmark</a>: an R package for benchmarking R code.</li>
<li><a href="https://github.com/collectivemedia/tictoc">tictok</a>: an R package to time R functions</li>
<li><a href="https://github.com/lorenzwalthert/touchstone/tree/main">touchstone</a>: an R package for benchmarking of pull requests with statistical confidence.</li>
</ul>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0">
<div id="ref-wickham2019advanced" class="csl-entry">
Wickham, Hadley. 2019. <em>Advanced r</em>. CRC press.
</div>
<div id="ref-wickham2023r" class="csl-entry">
Wickham, Hadley, and Jennifer Bryan. 2023. <em>R Packages</em>. " O’Reilly Media, Inc.".
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Benchmark (Wikipedia): <a href="https://en.wikipedia.org/wiki/Benchmark_(computing)" class="uri">https://en.wikipedia.org/wiki/Benchmark_(computing)</a>↩︎</p></li>
<li id="fn2"><p>Formating errors can be slow/variable: <a href="https://github.com/r-lib/cli/issues/617" class="uri">https://github.com/r-lib/cli/issues/617</a>↩︎</p></li>
<li id="fn3"><p>cli benchmarks: <a href="https://cli.r-lib.org/articles/ansi-benchmark.html" class="uri">https://cli.r-lib.org/articles/ansi-benchmark.html</a>↩︎</p></li>
<li id="fn4"><p>Donald Knuth’s quoted as having said, “The real problem is that programmers have spent far too much time worrying about efficiency in the wrong places and at the wrong times; premature optimization is the root of all evil (or at least most of it) in programming.” (See <a href="https://en.wikiquote.org/wiki/Donald_Knuth" class="uri">https://en.wikiquote.org/wiki/Donald_Knuth</a>)↩︎</p></li>
<li id="fn5"><p>Profiling (Wikipedia): <a href="https://csgillespie.github.io/efficientR/performance.html" class="uri">https://csgillespie.github.io/efficientR/performance.html</a>↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{mba_azam2023,
  author = {Mba Azam, James},
  title = {Using Benchmarking to Guide the Adoption of Dependencies in
    {R} Packages},
  date = {2023-11-22},
  url = {https://epiverse-trace.github.io/posts/benchmarking_design_decisions/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-mba_azam2023" class="csl-entry quarto-appendix-citeas">
Mba Azam, James. 2023. <span>“Using Benchmarking to Guide the Adoption
of Dependencies in R Packages.”</span> November 22, 2023. <a href="https://epiverse-trace.github.io/posts/benchmarking_design_decisions/">https://epiverse-trace.github.io/posts/benchmarking_design_decisions/</a>.
</div></div></section></div> ]]></description>
  <category>benchmarking</category>
  <category>R</category>
  <category>cli</category>
  <category>R package</category>
  <category>software architecture</category>
  <guid>https://epiverse-trace.github.io/posts/benchmarking_design_decisions/</guid>
  <pubDate>Wed, 22 Nov 2023 00:00:00 GMT</pubDate>
</item>
</channel>
</rss>
